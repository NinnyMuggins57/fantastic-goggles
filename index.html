<!doctype html>
<html>
<head>
  <title>Archivarix CMS</title>
  <meta name="robots" content="noindex,nofollow">
  <meta name="referrer" content="never">
  <meta name="referrer" content="no-referrer">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxzdHlsZT4uc3Qwe2ZpbGw6I2ZmYTcwMH0uc3Qxe2ZpbGw6I2ZmZn08L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0wIDBoMTZ2MTZIMHoiIGlkPSJCRyIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik00LjkgMy45Yy40LS4xLjgtLjIgMS4xLS4yLjMgMCAuNi4xLjkuMy4yLjEuNC4zLjYuNy4xLjIuMy43LjUgMS4zbDEuMSAzYy4yLjcuNSAxLjIuOCAxLjYuMy40LjUuNy43LjkuMi4yLjQuMy43LjQuMi4xLjQuMS42LjFoLjR2LjFjLS4zLjEtLjUuMS0uOC4xLS4zIDAtLjUtLjEtLjgtLjItLjMtLjEtLjUtLjMtLjgtLjYtLjYtLjQtMS0xLjItMS40LTIuMmwtLjMtMUg1LjhsLS42IDEuNnYuMmMwIC4xIDAgLjEuMS4ycy4yLjEuMy4xaC4xdi4xSDMuOHYtLjFoLjFjLjEgMCAuMyAwIC40LS4xLjEtLjEuMi0uMi4zLS40bDIuMi01LjJjLS4zLS41LS43LS43LTEuMi0uN2gtLjd6bTEgNGgyLjJsLS43LTJjLS4xLS40LS4zLS43LS40LTFsLTEuMSAzeiIgaWQ9IkxvZ28iLz48L3N2Zz4=">
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
      padding-top: 50px;
    }

    @media (min-width: 992px) {
      #sidebar {
        overflow-y: scroll;
        padding: 0;
        position: fixed;
        top: 60px;
        left: 0;
        bottom: 0;
      }
    }

    .bg-image {
      background: repeating-linear-gradient(45deg, #bcbcbc, #bcbcbc 10px, #f0f0f0 10px, #f0f0f0 20px);
    }

    .cursor-link {
      cursor: pointer;
    }

    .mce-fullscreen {
      padding-top: 55px !important;
    }

    #textarea_html {
      min-height: 400px;
      display: none;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .CodeMirror {
      box-sizing: border-box;
      margin: 0;
      display: block;
      width: 100%;
      height: auto !important;
      padding: 0;
      font-size: 12px;
      line-height: 1.42857143;
      color: #555;
      background-color: #fff;
      background-image: none;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
      transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
      font-family: monospace, monospace;
    }

    .CodeMirror-focused {
      border-color: #66afe9;
      outline: 0;
      box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6);
      transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    }

    .jstree-default a {
      white-space: normal !important;
      height: auto;
    }

    .jstree-anchor {
      height: auto !important;
      font-size: 0.8em;
      word-wrap: anywhere;
      word-break: break-all;
      padding: 0 !important;
    }

    .jstree-leaf a {
      height: auto !important;
    }

    .jstree-default a.jstree-search {
      color: inherit;
    }

    .jstree-wholerow-clicked {
      background: inherit !important;
    }

    pre {
      white-space: pre-wrap;
    }

    .domain-name-toggle[aria-expanded=false] {
      text-decoration-line: underline;
      text-decoration-style: dotted;
    }

    .expand-label[data-toggle="collapse"][aria-expanded="true"] .fas:before {
      content: "\f0d7";
    }

    .expand-label[data-toggle="collapse"][aria-expanded="false"].collapsed .fas:before {
      content: "\f0da";
    }

    .bg-search-url {
      background-color: #e3f1ff !important;
    }

    .dropzone {
      border: dashed 1px !important;
      text-align: center;
    }

    .dz-drag-hover {
      background-color: #28a745 !important;
    }

    .logo-cloudflare {
      height: 1em;
      background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDg2LjMgMTU0LjMiPjxwYXRoIGQ9Ik0xMDgwLjIgMTA5LjdhNi4wNiA2LjA2IDAgMCAxLTYuMS02LjEgNi4xIDYuMSAwIDEgMSA2LjEgNi4xbTAtMTFhNC45IDQuOSAwIDEgMCA0LjkgNC45IDQuOTEgNC45MSAwIDAgMC00LjktNC45bTMuMSA4LjFoLTEuNGwtMS4yLTIuM2gtMS42djIuM2gtMS4zdi02LjdoMy4yYTIuMTMgMi4xMyAwIDAgMSAyLjMgMi4yIDIuMDggMi4wOCAwIDAgMS0xLjQgMnptLTIuNC0zLjVhLjk0Ljk0IDAgMCAwIDEtMWMwLS44LS40LTEtMS0xaC0ydjJ6bS02MzYuMi02LjRoMTUuNnY0Mi41aDI3LjFWMTUzaC00Mi43em01OC44IDI4LjJ2LS4xYzAtMTYuMSAxMy0yOS4yIDMwLjMtMjkuMnMzMC4xIDEyLjkgMzAuMSAyOXYuMmMwIDE2LjEtMTMgMjkuMi0zMC4zIDI5LjJzLTMwLjEtMTMtMzAuMS0yOS4xbTQ0LjYgMHYtLjFjMC04LjEtNS44LTE1LjEtMTQuNC0xNS4xcy0xNC4yIDYuOS0xNC4yIDE1di4yYzAgOC4xIDUuOCAxNS4xIDE0LjMgMTUuMXMxNC4zLTcgMTQuMy0xNS4xbTM0LjkgMy4zVjk2LjloMTUuOHYzMS4yYzAgOC4xIDQuMSAxMS45IDEwLjMgMTEuOXMxMC4zLTMuNyAxMC4zLTExLjVWOTYuOWgxNS44VjEyOGMwIDE4LjEtMTAuMyAyNi0yNi4zIDI2cy0yNS45LTgtMjUuOS0yNS42bTc2LTMxLjVoMjEuN2MyMCAwIDMxLjcgMTEuNSAzMS43IDI3Ljd2LjJjMCAxNi4yLTExLjggMjguMi0zMiAyOC4yaC0yMS4zbC0uMS01Ni4xem0yMS45IDQyLjNjOS4zIDAgMTUuNS01LjEgMTUuNS0xNC4ydi0uMmMwLTktNi4yLTE0LjItMTUuNS0xNC4yaC02LjN2MjguNWw2LjMuMXptNTQtNDIuM2g0NC45djEzLjdoLTI5LjR2OS41SDc3N1YxMzNoLTI2LjZ2MjBoLTE1LjV6bTY2LjUgMGgxNS41djQyLjVoMjcuMlYxNTNoLTQyLjd6bTgzLjMtLjRoMTVsMjMuOSA1Ni41aC0xNi43bC00LjEtMTBoLTIxLjZsLTQgMTBoLTE2LjNsMjMuOC01Ni41em0xMy43IDM0LjRsLTYuMi0xNS45LTYuMyAxNS45em00NS4yLTM0aDI2LjVjOC42IDAgMTQuNSAyLjIgMTguMyA2LjEgMy4zIDMuMiA1IDcuNSA1IDEzLjF2LjJjMCA4LjYtNC42IDE0LjMtMTEuNSAxNy4ybDEzLjQgMTkuNmgtMThsLTExLjMtMTdoLTYuOHYxN2gtMTUuNWwtLjEtNTYuMnptMjUuOCAyN2M1LjMgMCA4LjMtMi42IDguMy02LjZ2LS4zYzAtNC40LTMuMi02LjYtOC40LTYuNmgtMTAuMnYxMy41em00Ni40LTI3aDQ1LjF2MTMuM2gtMjkuN3Y4LjRoMjYuOXYxMi4zaC0yNi45djguOWgzMC4xVjE1M2gtNDUuNXptLTYwNS4xIDM0LjhhMTMuNzkgMTMuNzkgMCAwIDEtMTIuOCA4LjRjLTguNSAwLTE0LjMtNy4xLTE0LjMtMTUuMXYtLjJjMC04LjEgNS43LTE1IDE0LjItMTVhMTMuOTMgMTMuOTMgMCAwIDEgMTMuMyA5LjNoMTYuNGMtMi42LTEzLjQtMTQuNC0yMy4zLTI5LjYtMjMuMy0xNy4zIDAtMzAuMyAxMy4xLTMwLjMgMjkuMnYuMmMwIDE2LjEgMTIuOCAyOSAzMC4xIDI5IDE0LjggMCAyNi40LTkuNiAyOS40LTIyLjRsLTE2LjQtLjF6IiBmaWxsPSIjNDA0MDQxIi8+PHBhdGggZD0iTTMxMi44IDkxLjZMMjY5LjkgNjdsLTcuNC0zLjJMODcgNjUuMXY4OWwyMjUuOC4xeiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0yMzQuNyAxNDZjMi4xLTcuMiAxLjMtMTMuOC0yLjItMTguNy0zLjItNC41LTguNi03LjEtMTUuMS03LjRsLTEyMy4xLTEuNmEyLjI4IDIuMjggMCAwIDEtMS45LTEgMi43NiAyLjc2IDAgMCAxLS4zLTIuMiAzLjM4IDMuMzggMCAwIDEgMi45LTIuMmwxMjQuMi0xLjZjMTQuNy0uNyAzMC43LTEyLjYgMzYuMy0yNy4ybDcuMS0xOC41YTQgNCAwIDAgMCAuMi0yLjQgODAuODcgODAuODcgMCAwIDAtMTU1LjUtOC4zIDM2LjM1IDM2LjM1IDAgMCAwLTU4IDI1LjQgMzguMTggMzguMTggMCAwIDAgLjkgMTIuN0E1MS42NiA1MS42NiAwIDAgMCAwIDE0NC43YTYzIDYzIDAgMCAwIC41IDcuNSAyLjQ2IDIuNDYgMCAwIDAgMi40IDIuMWgyMjcuMmEzLjA5IDMuMDkgMCAwIDAgMi45LTIuMmwxLjctNi4xeiIgZmlsbD0iI2YzODAyMCIvPjxwYXRoIGQ9Ik0yNzMuOSA2Ni45Yy0xLjEgMC0yLjMgMC0zLjQuMWEyIDIgMCAwIDAtMS44IDEuNGwtNC44IDE2LjdjLTIuMSA3LjItMS4zIDEzLjggMi4yIDE4LjcgMy4yIDQuNSA4LjYgNy4xIDE1LjEgNy40bDI2LjIgMS42YTIuMjggMi4yOCAwIDAgMSAxLjkgMSAyLjgyIDIuODIgMCAwIDEgLjMgMi4yIDMuMzggMy4zOCAwIDAgMS0yLjkgMi4ybC0yNy4zIDEuNmMtMTQuOC43LTMwLjcgMTIuNi0zNi4zIDI3LjJsLTIgNS4xYTEuNDQgMS40NCAwIDAgMCAxLjQgMmg5My44YTIuNDYgMi40NiAwIDAgMCAyLjQtMS44IDY4LjM1IDY4LjM1IDAgMCAwIDIuNS0xOC4yIDY3LjI0IDY3LjI0IDAgMCAwLTY3LjMtNjcuMiIgZmlsbD0iI2ZhYWU0MCIvPjwvc3ZnPg==');
      background-repeat: no-repeat;
      background-position: center;
    }

    .revisions ins {
      border-top: 1px solid #b8ecc6;
      border-left: 1px solid #b8ecc6;
      border-right: 1px solid #b8ecc6;
      background: #e6ffed;
      padding: 0 5px 0 20px;
      display: block;
      text-decoration: none;
      min-height: 1.5em;
      white-space: pre-wrap;
      position: relative;
    }

    .revisions ins:hover {
      background: #cdffd8;
    }

    .revisions ins::before {
      content: "+";
      color: #6c757d;
      background: #cdffd8;
      padding: 0 5px 0 5px;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
    }

    .revisions ins:last-child {
      border-bottom: 1px solid #b8ecc6;
    }

    .revisions del {
      border-top: 1px solid #f5d5d9;
      border-left: 1px solid #f5d5d9;
      border-right: 1px solid #f5d5d9;
      background: #ffeef0;
      padding: 0 5px 0 20px;
      display: block;
      text-decoration: none;
      min-height: 1.5em;
      white-space: pre-wrap;
      position: relative;
    }

    .revisions del:hover {
      background: #ffdce0;
    }

    .revisions del::before {
      content: "-";
      color: #6c757d;
      background: #ffdce0;
      padding: 0 5px 0 5px;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
    }

    .revisions del:last-child {
      border-bottom: 1px solid #f5d5d9;
    }

    .revisions span {
      border-top: 1px solid #f0f0f0;
      border-left: 1px solid #e2e2e2;
      border-right: 1px solid #e2e2e2;
      background: #ffffff;
      padding: 0 5px 0 20px;
      display: none;
      text-decoration: none;
      min-height: 1.5em;
      white-space: pre-wrap;
      position: relative;
    }

    .revisions span:hover {
      background: #eeeeee;
    }

    .revisions span::before {
      content: " ";
      color: #6c757d;
      background: #f3f3f3;
      padding: 0 5px 0 5px;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
    }

    .revisions span:last-child {
      border-bottom: 1px solid #e2e2e2;
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css" integrity="sha512-P5MgMn1jBN01asBgU0z60Qk4QxiXo86+wlFahKrsQf37c9cro517WzVSPPV1tDKzhku2iJ2FVgL67wG03SGnNA==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.11/themes/default/style.min.css" integrity="sha512-P8BwDSUInKMA7I116Z1RFg/Dfk85uFdliEUYO7vQlwtxLVMNvZimfMAQsaf++9EhlAGOVX6yhDQAIY3/70jDUg==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.18.3/bootstrap-table.min.css" integrity="sha512-5RNDl2gYvm6wpoVAU4J2+cMGZQeE2o4/AksK/bi355p/C31aRibC93EYxXczXq3ja2PJj60uifzcocu2Ca2FBg==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/codemirror.min.css" integrity="sha512-xIf9AdJauwKIVtrVRZ0i4nHP61Ogx9fSRAkCLecmE2dL/U8ioWpDvFCAy4dcfecN72HHB9+7FfQj3aiO68aaaw==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/addon/dialog/dialog.min.css" integrity="sha512-Vogm+Cii1SXP5oxWQyPdkA91rHB776209ZVvX4C/i4ypcfBlWVRXZGodoTDAyyZvO36JlTqDqkMhVKAYc7CMjQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.2/dropzone.min.css" integrity="sha512-jU/7UFiaW5UBGODEopEqnbIAHOI8fO6T99m7Tsmqs2gkdujByJfkCbbfPSN4Wlqlb9TGnsuC0YgUgWkRBK7B9A==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>
if ( !$accessAllowed && $extensionsAllowed ) {
  <div class="container">
    <div class="modal fade show d-block p-3" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="false">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content border-0 bg-dark">
          <div class="modal-header d-block border-0 pt-3 pb-0">
            <div class="row">
              <div class="col mb-3 text-center text-sm-left">
              </div>
              <div class="col-12 mb-3 col-sm-auto text-center">
                <div class="btn-group btn-group-sm" role="group">
                  $locales = $cmsLocales;
                  unset( $locales['en'] );
                      <i class="fas fa-language fa-fw"></i>
                    </button>
                    <div class="dropdown-menu">
                      unset( $locales[getLang()] );
                    </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-body p-3 bg-secondary rounded-bottom">
            <form method="post" action="" class="needs-validation" novalidate>
              <div class="d-flex">
                <div class="w-100 input-group pr-2">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-fw fa-eye-slash password-eye"></i></span></div>
                </div>
                <div class="ml-auto">
                  <button type="submit" class="btn btn-success"><i class="fas fa-unlock-alt fa-fw"></i>
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
}

if ( !$extensionsAllowed ) {
  $section = '';
  addWarning( sprintf( L( 'In order to continue, you must have the following PHP extensions enabled: %s' ), implode( ', ', getMissingExtensions( ['json', 'pcre', 'pdo_sqlite', 'zip'] ) ) ), 4, L( 'System check' ) );
  <div class="container">
    <div class="modal fade show d-block p-3" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="false">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content border-0 bg-dark">
          <div class="modal-header justify-content-center border-0 py-3">
          </div>
          <div class="modal-body p-3 bg-light rounded-bottom text-center border border-top-0">
          </div>
        </div>
      </div>
    </div>
  </div>
}

  <div class="container">
    <div class="card mb-3 border-0">

      <div class="card-header pt-3 pb-0 bg-dark">
        <div class="row">
          <div class="col mb-3 text-center text-sm-left">
          </div>
          <div class="col-12 col-sm-auto mb-3 text-center">
            <div class="btn-group btn-group-sm" role="group">
              $locales = $cmsLocales;
              unset( $locales['en'] );
                  <i class="fas fa-language fa-fw"></i>
                </button>
                <div class="dropdown-menu">
                  unset( $locales[getLang()] );
                </div>
            </div>
          </div>
            <div class="col-12 col-sm-auto mb-3 text-center pl-sm-0 d-block d-sm-flex align-items-center">
              </a>
            </div>
        </div>
      </div>
      <div class="card-body border border-top-0">
        <div class="">
            <div class="alert alert-warning d-md-flex align-items-center">
              <div class="mr-auto pr-md-2">
              </div>
              <div class="mt-2 mt-md-0">
                <form action="" method="post">
                  <input type="hidden" name="action" value="rename.cms">
                </form>
              </div>
            </div>
            <div class="alert alert-success">
            </div>
          <form action="" method="post" id="form_import_uuid" class="needs-validation form-wait" novalidate>
            <div class="input-group">
              <div class="input-group-append">
              </div>
            </div>
            <input type="hidden" name="action" value="download.serial.install">
          </form>

          <div class="d-flex align-items-center text-secondary small text-uppercase">
            <div class="w-100">
              <hr class="my-0">
            </div>
            <div class="w-100">
              <hr class="my-0">
            </div>
          </div>

          <form action="" method="post" id="form_import_upload" enctype="multipart/form-data" class="needs-validation form-wait" novalidate>
            <div class="input-group">
              <div class="custom-file">
                <input type="file" class="custom-file-input input-upload-file" name="import_file" accept=".zip,application/zip,application/octet-stream,application/x-zip-compressed,multipart/x-zip" id="input_import_file" aria-describedby="button_import_file" required>
              </div>
              <div class="input-group-append">
              </div>
            </div>
            <input type="hidden" name="action" value="import.upload.install">
          </form>
        </div>

        $sourcePath = __DIR__ . DIRECTORY_SEPARATOR . '.content.tmp';
        if ( file_exists( $sourcePath ) ) {
          $imports = getImportsList();
            <div class="bg-light rounded border shadow p-3 mt-3">
              <div class="row">
                <div class="col-12 col-md-3 mb-3">
                </div>
                <div class="col-12 col-md-6 mb-3">
                  </div>
                  </div>
                  <div class="small text-muted">
                  </div>
                </div>
                <div class="col-12 col-md-3 text-center text-md-right">
                    <i class="fas fa-chart-pie fa-fw"></i>
                  </button>
                    <input type="hidden" name="action" value="import.remove.install">
                      <i class="fas fa-trash-alt fa-fw"></i></button>
                  </form>
                </div>


                    <div class="mb-3">
                      <table class="table table-striped table-sm table-responsive">
                        <thead>
                        <tr>
                          <th class="w-100">
                            <div class="form-check font-weight-bold">
                            </div>
                          </th>
                        </tr>
                        </thead>
                          <tr>
                            <td>
                              <div class="form-check">
                              </div>
                            </td>
                          </tr>
                      </table>
                    </div>

                      <div class="alert alert-warning">
                        <div class="custom-control custom-checkbox mb-0">
                          <input type="hidden" name="settings[integration]" value="0">
                          </small>
                        </div>
                      </div>

                      <div class="custom-control custom-checkbox mb-0">
                        <input type="hidden" name="settings[acms_settings]" value="0">
                      </div>

                      <div class="custom-control custom-checkbox mb-0">
                        <input type="hidden" name="settings[loader_settings]" value="0">
                      </div>

                      <div class="custom-control custom-checkbox mb-0">
                        <input type="hidden" name="settings[templates]" value="0">
                            <li class="list-group-item list-group-item-action py-1 text-nowrap text-truncate text-monospace rounded-0">
                            </li>
                        </div>
                      </div>

                    <div class="custom-control custom-checkbox mb-0">
                      <input type="hidden" name="settings[custom_includes]" value="0">
                          <li class="list-group-item list-group-item-action px-0 py-1 text-nowrap text-truncate text-monospace rounded-0">
                          </li>
                      </div>
                      <div class="small text-danger mt-1">
                      </div>
                      <div>
                        <div class="custom-control custom-checkbox mb-1">
                          <input type="checkbox" class="custom-control-input" name="settings[crawlers_allow]" value="1" id="check_crawlers_allow"">
                        </div>
                        <div class="custom-control custom-checkbox mb-1">
                          <input type="checkbox" class="custom-control-input" name="settings[sitemap_enable]" value="1" id="check_sitemap_enable"">
                        </div>
                        <div class="custom-control custom-checkbox mb-1">
                          <input type="checkbox" class="custom-control-input" name="settings[404_enable]" value="1" id="check_404_enable"">
                        </div>
                          <div class="custom-control custom-checkbox mb-1">
                          </div>
                      </div>
                      <input type="hidden" name="action" value="import.perform.install">
                      <input type="hidden" name="disable_history" value="1">
                      <div class="text-center">
                        <button class="btn btn-success mt-3" type="submit">
                      </div>
                  </form>
                </div>
              </div>

              </div>

            </div>
          }
        }
      </div>

      <div class="border border-top-0 rounded-bottom bg-light small">
        <div class="expand-label px-3 py-2 text-right" data-toggle="collapse" href="#collapseSystemInfo" role="button" aria-expanded="false" aria-controls="collapseSystemInfo">
          <i class="fab fa-php"></i></div>
        <div class="collapse px-3 pb-3 pt-0" id="collapseSystemInfo">
          <table class="table table-sm table-hover mb-0">
            <thead class="thead-light">
            <tr>
            </tr>
            </thead>
            <tr>
              <td>
              </td>
            </tr>
            <tr>
            </tr>
            <tr>
              <td>
                $recommendedExtensions = ['curl', 'dom', 'fileinfo', 'iconv', 'imagick', 'intl', 'json', 'libxml', 'pcre', 'pdo_sqlite', 'zip',];
                $missingExtensions     = getMissingExtensions( $recommendedExtensions );
              </td>
            </tr>
            <tr>
            </tr>
            <tr>
            </tr>
            <tr>
            </tr>
          </table>
        </div>
      </div>


    </div>
  </div>
}


  <div class="pt-3 container">
    <div class="p-4 rounded-top bg-dark text-light shadow">
      <div class="d-flex align-items-center">
        <div class=""><i class="fas fa-info-circle fa-3x mr-3"></i></div>
      </div>
      <form action="" method="post" id="form_task_part" class="form-wait">
      </form>
      <div class="small text-right">
      </div>
    </div>
    $stats = unserialize( $taskStats );
    if ( !empty( $stats['processed'] ) && !empty( $stats['total'] ) ) {
      <div class="progress rounded-0">


      </div>
  </div>

  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" style="">
    <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
      <ul class="navbar-nav">
        <li class="nav-item">
          <form action="" method="post" id="formSearchNew">
            <input type="hidden" name="search" value=""/>
            <input type="hidden" name="replace" value=""/>
            <input type="hidden" name="regex" value=""/>
            <input type="hidden" name="text_files_search" value=""/>
            <input type="hidden" name="action" value="searchreplace.code"/>
            <input type="hidden" name="type" value="new"/>
            </a>
          </form>
        </li>
        <li class="nav-item">
          <form action="" method="post" id="formToolsView">
            <input type="hidden" name="action" value="tools.view"/>
            </a>
          </form>
        </li>
        <li class="nav-item">
          <form action="" method="post" id="formHistoryNew">
            <input type="hidden" name="action" value="history.edit"/>
            </a>
          </form>
        </li>
        <li class="nav-item">
          <form action="" method="post" id="formSettingsView">
            <input type="hidden" name="action" value="settings.view"/>
            <a class="nav-link cursor-link" id="clickSettings"><i class="fas fa-cog fa-fw"></i>
            </a>
          </form>
        </li>
        <li class="nav-item">
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-language fa-fw"></i>
          <div class="dropdown-menu dropdown-menu-right pre-scrollable" aria-labelledby="navbarDropdownMenuLink">
              $locales = $cmsLocales;
              unset( $locales['en'], $locales['ru'] );
          </div>
        </li>
          <li class="nav-item">
          </li>
      </ul>
    </div>
  </nav>

    <div class="pt-4 container">
      <div class="px-4 py-3 rounded-top bg-dark text-light shadow">
        <div class="d-flex align-items-center">
          <div class=""><i class="fas fa-info-circle fa-3x mr-3"></i></div>
        </div>
        <form action="" method="post" id="form_task_part" class="form-wait">
        </form>
        <div class="small text-right">
        </div>
      </div>
      $stats = unserialize( $taskStats );
      if ( !empty( $stats['processed'] ) && !empty( $stats['total'] ) ) {
        <div class="progress rounded-0">
        </div>
    </div>

    <div class="pt-3 container-fluid">
      <div class="row h-100">
        <div class="col-12 col-lg-3 border-0 mb-2 order-2 order-md-1" id="sidebar">
          <!-- SEARCH -->
          <div class="bg-white sticky-top px-1">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text bg-white px-2"><i class="fas fa-filter fa-fw"></i></span>
              </div>
            </div>
            <hr class="mt-1 mb-0 d-none d-lg-block">
          </div>

          <div class="p-1">
              <div class="alert-info rounded p-2 mb-1 small text-center text-uppercase">

              <div class="bg-danger text-light rounded p-2 mb-1 small">
                <div class="">
                </div>
                <hr class="bg-light my-2">
                <div class="text-center">
                  <form action="" method="post">
                    <input type="hidden" name="action" value="settings.view"/>
                    <button type="submit" class="btn btn-light btn-sm">
                    </button>
                  </form>
                  </a>
                </div>
              </div>

              $stats = unserialize( $taskStats );
              <!-- DEBUG MODE -->
              <div class="pt-3 text-white bg-dark rounded-top"></div>
              <div class="rounded-bottom bg-dark mb-1">
                <div class="d-flex text-white text-monospace px-3 pb-3">
                  <div class="expand-label text-uppercase " data-toggle="collapse" href="#collapseDebug" role="button" aria-expanded="false" aria-controls="collapseDebug">
                  </div>
                  </div>
                </div>
                <div class="bg-info text-white text-monospace p-3 rounded-bottom collapse" id="collapseDebug">
                </div>
              </div>

              <div class="text-center mb-2">
                </button>
              </div>
              <div class="text-center mb-2">
                <form action="" method="post">
                  <input type="hidden" name="action" value="import.view">
                  <button class="btn btn-primary btn-block" type="submit">
                </form>
              </div>

            <!-- TEMPLATES -->
              <div id="accordion_templates">
                <div class="card border-0 bg-light mb-1">
                  <div class="card-header border-0 rounded h5 px-2 py-3 alert-success">
                  </div>
                </div>
              </div>
              <div class="collapse multi-collapse show urls-collapse" id="collapse_templates">
                <div class="card-body p-0">
                  <div class="mb-2 small list-group">
                      <div class="d-flex">
                        </a>
                      </div>
                  </div>
                </div>
              </div>
              <hr class="mx-0 my-1">

            $urlsDisplayed    = 0;
            $domainsDisplayed = 0;
              <!-- DOMAINS TREE -->
                <div class="card border-0 rounded-top bg-light mb-1">
                  <div class="card-header border-0 p-0 rounded">
                    <div class="d-flex align-items-stretch">
                      <div class="h5 pl-2 pr-1 py-3 mb-0 rounded-left d-flex align-items-center">
                      </div>
                      <div class="h5 px-1 py-3 mb-0">
                      </div>
                      <div class="ml-auto text-nowrap align-items-center pr-2 d-flex align-items-center">
                          <i class="fas fa-expand-alt fa-fw fa-rotate-90"></i>
                        </button>
                          <i class="fas fa-file fa-fw"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

                <div class="card-body p-0">
                    $pageCurrent = 1;
                    $pagesTotal  = $ACMS['ACMS_URLS_LIMIT'] ? ceil( $urlsTotal[$domainName] / $ACMS['ACMS_URLS_LIMIT'] ) : 0;
                    if ( key_exists( $domainName, $urlOffsets ) ) {
                      $pageCurrent = $urlOffsets[$domainName];
                    }
                    <nav>
                      <ul class="pagination pagination-sm justify-content-center mb-2 flex-wrap">
                        if ( $pagesTotal ) for ( $i = 1; $i <= $pagesTotal; $i++ ) {
                            <li class="page-item">
                            </li>
                            <li class="page-item disabled">
                              <a class="page-link">&hellip;</a>
                            </li>
                            <li class="page-item disabled">
                              <a class="page-link">&hellip;</a>
                            </li>
                            <li class="page-item">
                            </li>
                            <li class="page-item active" aria-current="page">
                            </li>
                        }
                      </ul>
                    </nav>
                  </div>
                </div>
              </div>
              $domainsDisplayed++;
              if ( $domainsDisplayed == 100 ) break;
            <hr class="d-lg-none">
          </div>
        </div>

        <div class="col-12 col-lg-9 ml-auto pt-0 order-1 order-md-2 pb-3" id="main">
          showWarning();
          if ( $section == 'settings' ) {
            $customFilesOnly = getOnlyCustomFiles( getCustomFiles() );
            if ( empty( $subSection ) ) $subSection = 'acms';
            <div class="card mb-3">
              <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs" role="tablist" style="flex-wrap: inherit;">
                  <li class="nav-item">
                      CMS</a>
                  </li>
                  <li class="nav-item">
                  </li>
                  <li class="nav-item">
                  </li>
                </ul>
              </div>


              <div class="card-body">
                <div class="tab-content">
                    <form action="" method="post" id="form_acms_settings" class="needs-validation" novalidate>
                        <div class="form-group">
                            <div class="custom-control custom-checkbox mb-1">
                              <input type="checkbox" class="custom-control-input" name="remove_password" value="1" id="acms_settings_remove_password"">
                            </div>
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text"><i class="fas fa-fw fa-eye-slash password-eye"></i></span>
                            </div>
                            <input class="form-control" type="password" name="settings[ACMS_PASSWORD]" placeholder="" pattern=".{1,}" id="acms_settings_password" autocomplete="new-password">
                          </div>
                        </div>
                        <div class="form-group">
                            <div class="custom-control custom-checkbox mb-1">
                              <input type="checkbox" class="custom-control-input" name="remove_safe_password" value="1" id="acms_settings_remove_safe_password">
                            </div>
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text"><i class="fas fa-fw fa-eye-slash password-eye"></i></span>
                            </div>
                            <input class="form-control" type="password" name="settings[ACMS_SAFE_PASSWORD]" placeholder="" pattern=".{1,}" id="acms_settings_safe_password" autocomplete="new-password">
                          </div>
                        </div>
                      <div class="form-group">
                      </div>
                      <div class="form-group">
                      </div>
                      <div class="form-group">
                      </div>
                      <div class="custom-control custom-checkbox">
                        <input type="hidden" name="settings[ACMS_DISABLE_HISTORY]" value="0">
                      </div>
                      <div class="form-group">
                        <select class="form-control" name="settings[ACMS_EDITOR_DEFAULT]" id="acms_settings_default_editor" required>
                          $acmsHtmlEditors = [
                            ['value' => 'visual', 'label' => L( 'Visual editor' )],
                            ['value' => 'code', 'label' => L( 'Code' )],
                          ];
                        </select>
                      </div>
                      <div class="custom-control custom-checkbox">
                        <input type="hidden" name="settings[ACMS_EDITOR_HISTORY]" value="0">
                        </small>
                      </div>
                      <div class="form-group">
                        </small>
                      </div>
                        <div class="form-group">
                          </small>
                        </div>
                      <div class="text-right">
                        <input type="hidden" name="action" value="set.acms.settings">
                      </div>
                    </form>

                      <div class="d-flex align-items-center text-secondary small text-uppercase my-3">
                        <div class="w-100">
                          <hr class="my-0">
                        </div>
                        <div class="w-100">
                          <hr class="my-0">
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-12 col-sm-auto mb-3">
                          <form class="d-inline" action="" method="post">
                            <input type="hidden" name="action" value="download.acms.json">
                            <button class="btn btn-primary btn-block" type="submit">
                          </form>
                        </div>
                        <div class="col mb-3">
                          <form action="" method="post" id="form_import_acms_json" enctype="multipart/form-data" class="d-inline needs-validation form-wait" novalidate>
                            <div class="input-group">
                              <div class="custom-file">
                                <input type="file" class="custom-file-input input-upload-file" name="file" accept=".json,application/json" id="input_acms_file" aria-describedby="button_import_file_acms" required>
                              </div>
                              <div class="input-group-append">
                                <button class="btn btn-primary" type="submit" id="button_import_file_acms">
                              </div>
                            </div>
                            <input type="hidden" name="action" value="upload.acms.json">
                          </form>
                        </div>
                      </div>

                  </div>


                    <form action="" method="post" id="form_loader_settings" class="needs-validation" novalidate>
                      <div class="form-group">
                        <select class="form-control" name="settings[ARCHIVARIX_LOADER_MODE]" id="loader_settings_mode" required>
                          $loaderModes = [
                            ['value' => 0, 'label' => L( 'This website only (by default)' )],
                            ['value' => -1, 'label' => L( 'This website only, 404 code is for missing URLs' )],
                            ['value' => 1, 'label' => L( 'Integration with a third-party CMS, main page has this website' )],
                            ['value' => 2, 'label' => L( 'Integration with a third-party CMS, main page has other system' )],
                          ];
                        </select>
                      </div>
                      <div class="form-group">
                        <select class="form-control" name="settings[ARCHIVARIX_PROTOCOL]" id="loader_settings_protocol" required>
                          $loaderProtocols = [
                            ['value' => 'any', 'label' => L( 'HTTP and HTTPS (default)' )],
                            ['value' => 'https', 'label' => 'HTTPS'],
                            ['value' => 'http', 'label' => 'HTTP'],
                          ];
                        </select>
                      </div>
                      <div class="form-group">
                        <div class="loader-settings-rules-wrapper" id="sortwrapper">
                            $customRule = array_merge( getArrayTemplate( 'custom-rule' ), $customRule );
                            <div class="loader-custom-rule-block border rounded-bottom bg-light p-0 small mb-3 position-relative ">
                              <div class="position-absolute" style="top:-10px; left:-10px;">
                                <i class="fas fa-circle fa-stack-2x fa-fw text-dark"></i>
                                <i class="fas fa-sort fa-stack-1x fa-fw fa-inverse"></i>
                              </span>
                              </div>
                              <div class="position-absolute" style="top:-10px; right:-10px;">
                              <span class="fa-stack remove-loader-custom-rule bg-transparent cursor-link">
                                <i class="fas fa-circle fa-stack-2x fa-fw text-danger"></i>
                                <i class="fas fa-trash-alt fa-stack-1x fa-fw fa-inverse"></i>
                              </span>
                              </div>
                              <hr class="bg-success p-1 m-0">
                              <div class="p-3">
                                <div class="form-group">
                                  <div class="input-group">
                                    <div class="input-group-append">
                                      <div class="dropdown-menu dropdown-menu-right">
                                          </a>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="form-group">
                                  <div class="input-group">
                                    <div class="input-group-append">
                                      <div class="dropdown-menu dropdown-menu-right">
                                          <span class="text-monospace">&lt;/head&gt;</span></a>
                                          <span class="text-monospace">&lt;/body&gt;</span></a>
                                          <span class="text-monospace">&lt;body&gt;</span></a>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="form-group">
                                  <select class="form-control form-control-sm select-custom-regex" name="settings[ARCHIVARIX_INCLUDE_CUSTOM][REGEX][]">
                                  </select>
                                </div>
                                <div class="form-group">
                                </div>
                                <div class="form-group">
                                  <select class="form-control form-control-sm select-custom-position" name="settings[ARCHIVARIX_INCLUDE_CUSTOM][POSITION][]">
                                  </select>
                                </div>
                                <div class="form-group">
                                  <div class="input-group">
                                  </div>
                                </div>
                                <div class="form-group">
                                  <div class="input-group">
                                    <div class="input-group-prepend">
                                      <select class="custom-select custom-select-sm input-custom-urldepthoperator" name="settings[ARCHIVARIX_INCLUDE_CUSTOM][URL_DEPTH_OPERATOR][]">
                                      </select>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>

                          <div class="d-none loader-custom-rule-block border rounded-bottom bg-light small mb-3 position-relative">
                            <div class="position-absolute" style="top:-10px; left:-10px;">
                                <i class="fas fa-circle fa-stack-2x fa-fw text-dark"></i>
                                <i class="fas fa-sort fa-stack-1x fa-fw fa-inverse"></i>
                              </span>
                            </div>
                            <div class="position-absolute" style="top:-10px; right:-10px;">
                              <span class="fa-stack remove-loader-custom-rule bg-transparent cursor-link">
                                <i class="fas fa-circle fa-stack-2x text-danger"></i>
                                <i class="fas fa-trash-alt fa-stack-1x fa-inverse"></i>
                              </span>
                            </div>
                            <hr class="bg-secondary p-1 m-0">
                            <div class="p-3">
                              <div class="form-group">
                                <div class="input-group">
                                  <input type="text" class="form-control form-control-sm" name="settings[ARCHIVARIX_INCLUDE_CUSTOM][FILE][]" autocorrect="off" autocapitalize="none">
                                  <div class="input-group-append">
                                    <div class="dropdown-menu dropdown-menu-right">
                                        </a>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="form-group">
                                <div class="input-group">
                                  <input class="form-control form-control-sm text-monospace input-custom-keyphrase" name="settings[ARCHIVARIX_INCLUDE_CUSTOM][KEYPHRASE][]">
                                  <div class="input-group-append">
                                    <div class="dropdown-menu dropdown-menu-right">
                                        <span class="text-monospace">&lt;/head&gt;</span></a>
                                        <span class="text-monospace">&lt;/body&gt;</span></a>
                                        <span class="text-monospace">&lt;body&gt;</span></a>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="form-group">
                                <select class="form-control form-control-sm select-custom-regex" name="settings[ARCHIVARIX_INCLUDE_CUSTOM][REGEX][]">
                                </select>
                              </div>
                              <div class="form-group">
                                <input type="number" min="-1" step="1" class="form-control form-control-sm input-custom-limit" value="1" name="settings[ARCHIVARIX_INCLUDE_CUSTOM][LIMIT][]">
                              </div>
                              <div class="form-group">
                                <select class="form-control form-control-sm select-custom-position" name="settings[ARCHIVARIX_INCLUDE_CUSTOM][POSITION][]">
                                </select>
                              </div>
                              <div class="form-group">
                                <div class="input-group">
                                  <input class="form-control form-control-sm text-monospace input-custom-urlmatch" name="settings[ARCHIVARIX_INCLUDE_CUSTOM][URL_MATCH][]">
                                </div>
                              </div>
                              <div class="form-group">
                                <div class="input-group">
                                  <div class="input-group-prepend">
                                    <select class="custom-select custom-select-sm input-custom-urldepthoperator" name="settings[ARCHIVARIX_INCLUDE_CUSTOM][URL_DEPTH_OPERATOR][]">
                                    </select>
                                  </div>
                                  <input type="number" min="0" step="1" class="form-control form-control-sm text-monospace input-custom-urldepthvalue" name="settings[ARCHIVARIX_INCLUDE_CUSTOM][URL_DEPTH_VALUE][]">
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="">
                          <button type="button" class="btn btn-sm btn-success" id="create-loader-custom-rule">
                          </button>
                        </div>
                      </div>
                      <div class="custom-control custom-checkbox">
                        <input type="hidden" name="settings[ARCHIVARIX_FIX_MISSING_IMAGES]" value="0">
                      </div>
                      <div class="custom-control custom-checkbox">
                        <input type="hidden" name="settings[ARCHIVARIX_FIX_MISSING_CSS]" value="0">
                      </div>
                      <div class="custom-control custom-checkbox">
                        <input type="hidden" name="settings[ARCHIVARIX_FIX_MISSING_JS]" value="0">
                      </div>
                      <div class="custom-control custom-checkbox">
                        <input type="hidden" name="settings[ARCHIVARIX_FIX_MISSING_ICO]" value="0">
                      </div>
                      <div class="custom-control custom-checkbox">
                        <input type="hidden" name="settings[ARCHIVARIX_QUERYLESS]" value="0">
                      </div>
                      <div class="form-group">
                        </small>
                      </div>
                      <div class="form-group">
                      </div>
                      <div class="form-group">
                        </small>
                      </div>
                      <div class="form-group">
                        </small>
                      </div>
                      <div class="form-group">
                        </small>
                      </div>
                      <div class="form-group">
                        </small>
                      </div>
                      <div class="custom-control custom-checkbox">
                        <input type="hidden" name="settings[ARCHIVARIX_CATCH_MISSING]" value="0">
                        </small>
                      </div>
                      <div class="text-right">
                        <input type="hidden" name="action" value="set.loader.settings">
                      </div>
                    </form>

                      <div class="d-flex align-items-center text-secondary small text-uppercase my-3">
                        <div class="w-100">
                          <hr class="my-0">
                        </div>
                        <div class="w-100">
                          <hr class="my-0">
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-12 col-sm-auto mb-3">
                          <form class="d-inline" action="" method="post">
                            <input type="hidden" name="action" value="download.loader.json">
                            <button class="btn btn-primary btn-block" type="submit">
                          </form>
                        </div>
                        <div class="col mb-3">
                          <form action="" method="post" id="form_import_loader_json" enctype="multipart/form-data" class="d-inline needs-validation form-wait" novalidate>
                            <div class="input-group">
                              <div class="custom-file">
                                <input type="file" class="custom-file-input input-upload-file" name="file" accept=".json,application/json" id="input_loader_file" aria-describedby="button_import_file_loader" required>
                              </div>
                              <div class="input-group-append">
                                <button class="btn btn-primary" type="submit" id="button_import_file_loader">
                              </div>
                            </div>
                            <input type="hidden" name="action" value="upload.loader.json">
                          </form>
                        </div>
                      </div>

                  </div>


                      <div class="alert alert-warning">
                      </div>
                      <div class="mb-3">
                          <div class="dz-message m-0">
                          </div>
                          <div class="fallback">
                            <input name="file" type="file" multiple/>
                          </div>
                          <input type="hidden" name="action" value="upload.custom.file"/>
                        </form>
                      </div>

                        <div class="mb-3">
                          <button type="button" class="btn btn-sm btn-success" data-toggle="collapse" data-target="#div_create_custom_file" aria-expanded="true" aria-controls="div_create_custom_file" role="button">
                          <div class="mb-3 collapse" id="div_create_custom_file">
                            <hr>
                            <form action="" method="post" id="formCreateCustomFile" class="needs-validation" novalidate>
                              <div class="form-group">
                                <div class="input-group">
                                  <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="far fa-file fa-fw"></i></span>
                                  </div>
                                </div>
                              </div>
                              <div class="form-group">
                                <textarea id="textarea_text" class="d-none" name="content"></textarea>
                              </div>
                              <div class="text-right">
                                <input type="hidden" name="action" value="create.custom.file"/>
                                <button type="submit" class="btn btn-primary">
                              </div>
                            </form>
                          </div>
                        </div>

                      $customFiles = getCustomFiles();
                        <table class="table table-hover table-sm table-responsive">
                          <thead>
                          <tr class="bg-dark text-light">
                          </tr>
                          </thead>
                            <tr class="text-monospace">
                              <td class="text-nowrap">
                                    <input type="hidden" name="action" value="delete.custom.file">
                                      <i class="fas fa-trash-alt fa-fw"></i></button>
                                  </form>
                                    <input type="hidden" name="action" value="edit.custom.file">
                                    <button class="btn btn-primary btn-sm"><i class="fas fa-edit fa-fw"></i></button>
                                  </form>
                              </td>
                              <td class="w-100 text-nowrap align-middle">
                              </td>
                            </tr>
                        </table>

                          <div class="mb-3">
                            <hr>
                            <form action="" method="post" id="formCustomFile" class="needs-validation" novalidate>
                              <div class="form-group">
                                <div class="input-group">
                                  <div class="input-group-prepend">
                                  </div>
                                </div>
                              </div>
                              <div class="form-group">
                              </div>
                              <div class="text-right">
                                <input type="hidden" name="action" value="update.custom.file"/>
                                <button type="submit" class="btn btn-primary">
                              </div>
                            </form>
                          </div>
                      }
                  </div>


                </div>
              </div>
            </div>

          if ( $section == 'template' && !empty( $template ) ) {
            <div class="row">
              <div class="col-12 col-md-9 mb-3">
                <div class="border rounded p-3 h-100">
                  <form action="" method="post" class="needs-validation" novalidate>
                    <div class="row">
                      <div class="col-12 col-md-6">
                        <div class="form-group row">
                          <div class="col-sm-10">
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group row">
                          <div class="col-sm-10">
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group row">
                          <div class="col-sm-10">
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group row">
                          <div class="col-sm-10">
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group row">
                          <div class="col-sm-10 constructor-wrapper">
                            <div class="input-group input-group-sm">
                              <div class="input-group-append">
                                <span class="input-group-text bg-white input-clear cursor-link"><i class="fas fa-times"></i></span>
                              </div>
                            </div>
                            <span class="form-text">
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%year%" data-slash="true">%year%</span>
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%month%" data-slash="true">%month%</span>
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%day%" data-slash="true">%day%</span>
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%hour%" data-slash="true">%hour%</span>
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%minute%" data-slash="true">%minute%</span>
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%second%" data-slash="true">%second%</span>
                          </span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group row">
                          <div class="col-sm-10 constructor-wrapper">
                            <div class="input-group input-group-sm">
                              <div class="input-group-append">
                                <span class="input-group-text bg-white input-clear cursor-link"><i class="fas fa-times"></i></span>
                              </div>
                            </div>
                            <span class="form-text">
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%md5%" data-slash="true">%md5%</span>
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%filename%" data-slash="true">%filename%</span>
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%ext%" data-slash="false">%ext%</span>
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%year%" data-slash="true">%year%</span>
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%month%" data-slash="true">%month%</span>
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%day%" data-slash="true">%day%</span>
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%hour%" data-slash="true">%hour%</span>
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%minute%" data-slash="true">%minute%</span>
                            <span class="badge badge-pill badge-dark constructor-param cursor-link" data-value="%second%" data-slash="true">%second%</span>
                          </span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="d-md-flex h-100 align-items-end justify-content-end">
                          <div class="text-center text-md-right">
                            <button type="submit" class="btn btn-sm btn-primary">
                            <input type="hidden" name="action" value="update.template.settings"/>
                            <input type="hidden" name="show" value="edit.template"/>
                          </div>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>


              <div class="col-12 col-md-3 mb-3">
                <div class="border p-3 rounded h-100">
                  <div class="row">
                    <div class="col pr-0">
                      <form class="d-inline" id="" action="" method="post">
                        <input type="hidden" name="action" value="show.create.page">
                        <button class="btn btn-primary btn-block">
                      </form>
                    </div>
                    <div class="col-auto">
                      <form class="d-inline" id="form_template_remove" action="" method="post">
                        <input type="hidden" name="action" value="template.remove">
                          <i class="fas fa-trash-alt fa-fw"></i></button>
                      </form>
                    </div>
                  </div>
                    <div class="mt-2">
                      <div class="d-flex align-items-center">
                        <div class="w-100 ml-auto">
                          <hr>
                        </div>
                      </div>
                        <button type="button" class="btn alert-success btn-sm badge-pill text-monospace mb-1">
                        </button>
                    </div>
                </div>
              </div>

            </div>

            <div>
              <ul class="nav nav-tabs mb-3" role="tablist">
                <li class="nav-item">
                </li>
                <li class="nav-item">
                </li>
              </ul>
              <div class="tab-content">
                <div class="tab-pane fade" id="wysiwyg" role="tabpanel" aria-labelledby="wysiwyg-tab">
                  <form action="" method="post" onsubmit="ajaxSaveFile('formHtml'); return false;" id="formHtml">
                    <input type="hidden" name="action" value="update.template.content"/>
                    <input type="hidden" name="show" value="edit.template"/>
                    <input type="hidden" name="ajax" value="1"/>
                    <button type="submit" class="btn btn-primary float-right my-3">
                  </form>
                </div>
                <div class="tab-pane fade show active" id="code" role="tabpanel" aria-labelledby="code-tab">
                  <form action="" method="post" onsubmit="ajaxSaveFile('formCode'); return false;" id="formCode">
                    <input type="hidden" name="action" value="update.template.content"/>
                    <input type="hidden" name="show" value="edit.template"/>
                    <input type="hidden" name="ajax" value="1"/>
                    <div class="text-right" style="display: block; position: fixed; bottom: 30px; right: 30px; z-index: 99;">
                      <div class="row" id="template-param-panel">
                        <div class="col-auto alert-info p-2 mr-3 w-auto rounded">
                          <div class="d-flex">
                            <div class="text-monospace">
                              {{@<span id="template-param-type">STRING</span>('<input type="text" id="template-param-name" class="border-0 bg-transparent text-success text-center text-monospace d-inline input-resize-auto" value="name" size="4" pattern="[-A-Za-z0-9]+" onkeypress="return /[-a-z0-9]+/i.test(event.key)" onkeydown="return event.key != 'Enter';" onClick="this.select();">')}}
                            </div>
                            <div class="ml-auto">
                                <i class="fas fa-level-down-alt fa-fw fa-rotate-90"></i></button>
                            </div>
                          </div>
                          <hr class="my-1">
                          <div class="text-center">
                            <button type="button" class="btn btn-success btn-sm badge-pill" data-type="STRING">
                              <i class="fas fa-fw fa-align-left"></i> STRING
                            </button>
                            <button type="button" class="btn btn-success btn-sm badge-pill" data-type="HTML">
                              <i class="fas fa-fw fa-code"></i> HTML
                            </button>
                            <button type="button" class="btn btn-success btn-sm badge-pill" data-type="FILE">
                              <i class="fas fa-fw fa-file"></i> FILE
                            </button>
                            <button type="button" class="btn btn-success btn-sm badge-pill" data-type="URL" data-name="path">
                              <i class="fas fa-fw fa-link"></i> URL
                            </button>
                          </div>
                        </div>
                      </div>
                      <button type="submit" class="btn btn-primary mt-3" id="cmSave">
                    </div>
                  </form>
                </div>
              </div>
            </div>

            <div class="mt-3">
              <form action="" method="post" enctype="multipart/form-data" class="needs-validation" novalidate>
                <div class="form-group">
                  <div class="custom-control custom-checkbox mt-2">
                    <input type="hidden" name="path_latin" value="0">
                    <input class="custom-control-input" type="checkbox" name="path_latin" id="page_path_latin" checked value="1">
                  </div>
                </div>
                  if ( in_array( $data[0]['type'], ['URL'] ) ) continue;
                  <div class="form-group">
                      case 'STRING' :
                        echo '<input type="text" class="form-control" name="params[' . htmlspecialchars( $name ) . ']" id="input_' . htmlspecialchars( $name ) . '">';
                        break;
                      case 'HTML' :
                        echo '<textarea class="form-control tinymce-control" name="params[' . htmlspecialchars( $name ) . ']" id="input_' . htmlspecialchars( $name ) . '"></textarea>';
                        break;
                      case 'FILE' :
                        <div class="input-group">
                          <div class="custom-file">
                          </div>
                          <div class="input-group-append">
                          </div>
                        </div>
                      default :
                  </div>
                <input type="hidden" name="action" value="create.template.page"/>
                <div class="text-right">
                </div>
              </form>
            </div>

          if ( $section == 'backups' ) {
            $breakpoints = getBackupsBreakpoints();
            <div class="border p-0 mb-3 rounded">
              <div class="row m-3">
                <div class="col-12 col-sm-auto p-1">
                  <button type="button" class="btn btn-primary m-1 btn-block" data-toggle="modal" data-target="#breakpointModal">
                </div>
                <div class="col-12 col-sm-auto p-1">
                  <div class="btn-group m-1 btn-block" role="group">
                    <button id="rollbackGroup" type="button" class="btn btn-primary btn-block dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    </button>
                    <div class="dropdown-menu" style="max-width:400px;" aria-labelledby="rollbackGroup">
                          <div class="dropdown-divider"></div>
                          <div class="d-flex align-items-center">
                            <div class="text-truncate px-0">
                                <input type="hidden" name="action" value="history.recover">
                                  <small>
                                  </small>
                                </button>
                              </form>
                            </div>
                          </div>
                        <div class="dropdown-divider"></div>
                      <div class="dropdown-divider"></div>
                      <div>
                        <div class="text-truncate px-0">
                          <form class="d-inline form-wait" id="form_history_recover_all" action="" method="post">
                            <input type="hidden" name="action" value="history.recover">
                            <input type="hidden" name="all" value="1">
                            <button type="submit" class="dropdown-item text-truncate px-2" href="#">
                            </button>
                          </form>
                        </div>
                      </div>
                      <div class="dropdown-divider"></div>
                      <div>
                        <button type="button" class="dropdown-item text-truncate px-2" id="historyRecoverSelected">
                        </button>
                      </div>

                    </div>
                  </div>
                </div>

                <div class="col-12 col-sm-auto p-1">
                  <div class="btn-group m-1 btn-block" role="group">
                    <button id="rollbackGroup" type="button" class="btn btn-danger btn-block dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    </button>
                    <div class="dropdown-menu" style="max-width:400px;" aria-labelledby="rollbackGroup">
                          <div class="dropdown-divider"></div>
                          <div class="d-flex align-items-center">
                            <div class="text-truncate px-0">
                                <input type="hidden" name="action" value="history.purge">
                                  <small>
                                  </small>
                                </button>
                              </form>
                            </div>
                          </div>
                        <div class="dropdown-divider"></div>
                      <div class="dropdown-divider"></div>
                      <div>
                        <div class="text-truncate px-0">
                          <form class="d-inline form-wait" id="form_history_purge_all" action="" method="post">
                            <input type="hidden" name="action" value="history.purge">
                            <input type="hidden" name="all" value="1">
                            <button type="button" class="dropdown-item text-truncate px-2 btn-action" href="#" data-toggle="modal" data-target="#confirm-action" data-source="form_history_purge_all">
                            </button>
                          </form>
                        </div>
                      </div>
                      <div class="dropdown-divider"></div>
                      <div>
                        <button type="button" class="dropdown-item text-truncate px-2" id="historyPurgeSelected">
                        </button>
                      </div>
                    </div>
                  </div>
                </div>


                  <div class="col-12 col-sm-auto p-1">
                    <div class="btn-group m-1 btn-block dropdown" role="group">
                      <button id="reinstallGroup" type="button" class="btn btn-danger btn-block dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      </button>
                      <div class="dropdown-menu dropdown-menu-right pt-5 pt-sm-0 pb-0" style="max-width:available; position: relative;" aria-labelledby="rollbackGroup">
                            <input type="hidden" name="action" value="import.perform.reinstall">
                            <div class="dropdown-divider m-0"></div>
                            <div class="dropdown-item p-2">
                              <div class="position-relative">
                                <div class="text-center position-absolute" style="bottom:10%; left:50%; transform: translate(-50%); ">
                                </div>
                              </div>
                                <div class="d-flex align-items-center">
                                  <div>
                                  </div>
                                  <div class="ml-auto pl-3">
                                    <i class="fas fa-arrow-right fa-lg fa-fw"></i>
                                  </div>
                                </div>
                              </button>
                            </div>
                          </form>
                      </div>
                    </div>
                  </div>
              </div>
            </div>

              <thead class="thead-light">
              <tr>
                <th data-field="state" data-checkbox="true" class="px-1"></th>
                <th data-field="id" data-visible="false"></th>
              </tr>
              </thead>
              <tbody>
              foreach ( $backups as $historyItem ) {
                $historySettings = json_decode( $historyItem['settings'], true );
                <tr>
                  <td></td>
                  <td>
                      <i class="fas fa-circle fa-fw text-danger"></i>
                      <br/>
                  </td>
                </tr>
              </tr>
              </tbody>
            </table>
          }

            <form action="" method="post">
              <div class="form-group">
              </div>
              <div class="text-right">
                <input type="hidden" name="action" value="edit.htaccess">
              </div>
            </form>

            <form action="" method="post" class="import-external-urls-wrapper">
              <div class="form-group mt-3">
                <div class="input-group">
                  <div class="input-group-append">
                  </div>
                </div>
              </div>
              <div class="input-group mb-3">
                <input class="form-control text-monospace input-user-agent" id="external_urls_user_agent" name="user_agent" value="Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)">
                <div class="input-group-append">
                  <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item put-custom-rule cursor-link" data-useragent="Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)">GoogleBot</a>
                    <a class="dropdown-item put-custom-rule cursor-link" data-useragent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36">Chrome</a>
                    <a class="dropdown-item put-custom-rule cursor-link" data-useragent="Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:102.0) Gecko/20100101 Firefox/102.0">Firefox</a>
                      CMS</a>
                  </div>
                </div>
              </div>
              <div class="custom-control custom-checkbox">
                <input type="hidden" name="web_archive" value="0">
                <input id="external_urls_web_arvchive" class="custom-control-input" type="checkbox" name="web_archive" value="1">
              </div>
              <div class="custom-control custom-checkbox">
                <input type="hidden" name="make_local" value="0">
                <input id="external_urls_make_local" class="custom-control-input" type="checkbox" name="make_local" value="1">
              </div>
              <div class="text-right">
                <input type="hidden" name="action" value="import.urls.perform">
              </div>

              <div class="form-group">
              </div>
            </form>

          if ( $section == 'trackers' ) {
            $includesPath  = createDirectory( 'includes' );
            $trackersFile  = $includesPath . DIRECTORY_SEPARATOR . 'trackers.txt';
            $trackersExist = file_exists( $trackersFile );
            <form action="" method="post">
              <div class="form-group">
              </div>
              <div class="text-right">
                <input type="hidden" name="action" value="edit.trackers">
              </div>
            </form>

          if ( $section == 'table' ) {
              <thead class="thead-light">
              </tr>
              </thead>
              <tbody>
                </tr>
              </tbody>
            </table>
          }

          if ( $section == 'tools' ) {
            $missingExtensions = getMissingExtensions( ['zip', 'curl'] );
            <div class="row row-cols-1 row-cols-md-3">
              <div class="col mb-4">
                <div class="card h-100 shadow">
                  <div class="card-header text-white bg-dark">
                  </div>
                  <div class="card-body small">
                  </div>
                  <div class="card-footer text-right">
                    <form action="" method="post" id="">
                      <input type="hidden" name="action" value="import.view">
                    </form>
                  </div>
                </div>
              </div>

              <div class="col mb-4">
                <div class="card h-100 mb-4 shadow">
                  <div class="card-header text-white bg-dark">
                  </div>
                  <div class="card-body small">
                  </div>
                  <div class="card-footer text-right">
                    <form action="" method="post" id="form_convert_utf8" class="form-wait">
                      <input type="hidden" name="action" value="convert.utf8">
                      <button type="button" class="btn btn-sm btn-primary btn-action" data-toggle="modal" data-target="#confirm-action" data-source="form_convert_utf8">
                      </button>
                    </form>
                  </div>
                </div>
              </div>

              <div class="col mb-4">
                <div class="card h-100 mb-4 shadow">
                  <div class="card-header text-white bg-dark">
                  </div>
                  <div class="card-body small">
                    <form action="" method="post" id="form_robots_allow">
                      <div class="custom-control custom-checkbox mt-2">
                        <input id="tool_include_sitemap" type="checkbox" class="custom-control-input" name="sitemap_include" value="1" data-toggle="collapse" data-target="#tool_robots_sitemap">
                      </div>
                      <div class="collapse mt-1" id="tool_robots_sitemap">
                        $LOADER               = loadLoaderSettings();
                        $toolRobotsSitemapUrl = detectSitemapUrl();
                      </div>
                  </div>
                  <div class="card-footer text-right">
                    <input type="hidden" name="action" value="robots.allow">
                    </form>
                  </div>
                </div>
              </div>

              $missingExtensions = getMissingExtensions( ['dom', 'libxml', 'mbstring'] );
              <div class="col mb-4">
                <div class="card h-100 shadow">
                  <div class="card-header text-white bg-dark">
                  </div>
                  <div class="card-body small">
                  </div>
                  <div class="card-footer text-right">
                    <form action="" method="post" id="form_remove_version_control" class="form-wait">
                      <input type="hidden" name="action" value="version.control.remove">
                    </form>
                  </div>
                </div>
              </div>

              <div class="col mb-4">
                <div class="card h-100 shadow">
                  <div class="card-header text-white bg-dark">
                  </div>
                  <div class="card-body small">
                    <form action="" method="post" id="form_remove_broken_links" class="form-wait">
                      <div class="custom-control custom-checkbox mt-2">
                        <input id="tool_broken_links_files" type="checkbox" class="custom-control-input" name="check_files" value="1">
                        </label>
                      </div>
                      <div class="custom-control custom-checkbox mt-2">
                        <input id="tool_broken_links_stats" type="checkbox" class="custom-control-input" name="stats_only" value="1">
                        </label>
                      </div>
                  </div>
                  <div class="card-footer text-right">
                    <input type="hidden" name="action" value="broken.links.remove">
                    </form>
                  </div>
                </div>
              </div>

              <div class="col mb-4">
                <div class="card h-100 shadow">
                  <div class="card-header text-white bg-dark">
                  </div>
                  <div class="card-body small">
                    <form action="" method="post" id="form_remove_broken_images" class="form-wait">
                      <div class="custom-control custom-checkbox mt-2">
                        <input id="tool_broken_images_files" type="checkbox" class="custom-control-input" name="check_files" value="1">
                        </label>
                      </div>
                      <div class="custom-control custom-checkbox mt-2">
                        <input id="tool_broken_images_stats" type="checkbox" class="custom-control-input" name="stats_only" value="1">
                        </label>
                      </div>
                  </div>
                  <div class="card-footer text-right">
                    <input type="hidden" name="action" value="broken.images.remove">
                    </form>
                  </div>
                </div>
              </div>

              <div class="col mb-4">
                <div class="card h-100 shadow">
                  <div class="card-header text-white bg-dark">
                  </div>
                  <div class="card-body small">
                  </div>
                  <div class="card-footer text-right">
                    <form action="" method="post">
                      <input type="hidden" name="action" value="edit.trackers">
                    </form>
                  </div>
                </div>
              </div>

              <div class="col mb-4">
                <div class="card h-100 shadow">
                  <div class="card-header text-white bg-dark">
                  </div>
                  <div class="card-body small">
                    <form action="" method="post" id="form_update_viewport">
                      <div class="custom-control custom-checkbox mt-2">
                        <input id="checkbox_viewport_value" type="checkbox" class="custom-control-input" data-toggle="collapse" data-target="#tool_viewport_value">
                      </div>
                      <div class="collapse mt-1" id="tool_viewport_value">
                        <input type="input" class="form-control form-control-sm text-monospace" name="viewport_value" value="width=device-width, initial-scale=1">
                      </div>
                      <div class="custom-control custom-checkbox mt-2">
                        <input id="tool_viewport_overwrite" type="checkbox" class="custom-control-input" name="overwrite" value="1">
                        </label>
                      </div>
                  </div>
                  <div class="card-footer text-right">
                    <input type="hidden" name="action" value="update.viewport">
                    </form>
                  </div>
                </div>
              </div>

              <div class="col mb-4">
                <div class="card h-100 shadow">
                  <div class="card-header text-white bg-dark">
                  </div>
                  <div class="card-body small">
                    <br>
                  </div>
                  <div class="card-footer small">
                    <div class="">
                      <a href="#div_update_external_links" class="expand-label text-dark" data-toggle="collapse" data-target="#div_update_external_links" aria-expanded="false" aria-controls="div_update_external_links">
                      </a>
                    </div>
                    <div class="collapse mt-2" id="div_update_external_links">
                      <form action="" method="post" id="form_update_external_links" class="form-wait">
                        <div class="row">
                          <div class="col-12">
                            <div class="form-group">
                              <label>rel</label>
                            </div>
                            <div class="form-group">
                              <label>target</label>
                            </div>
                          </div>
                          <div class="col-12 text-center align-self-center">
                            <input type="hidden" name="action" value="external.links.update">

                            <div class="d-flex align-items-center text-secondary small text-uppercase my-2">
                              <div class="w-100">
                                <hr class="my-0">
                              </div>
                              <div class="w-100">
                                <hr class="my-0">
                              </div>
                            </div>

                          </div>
                        </div>
                      </form>
                      <form action="" method="post" id="form_remove_external_links" class="form-wait">
                        <input type="hidden" name="action" value="external.links.remove">
                      </form>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col mb-4">
                <div class="card h-100 shadow">
                  <div class="card-header text-white bg-dark">
                  </div>
                  <div class="card-body small">
                  </div>
                  <div class="card-footer text-right">
                    <form action="" method="post" id="form_update_encoded_urls" class="form-wait">
                      <input type="hidden" name="action" value="broken.encoded.urls">
                    </form>
                  </div>
                </div>
              </div>

              <div class="col mb-4">
                <div class="card h-100 shadow">
                  <div class="card-header text-white bg-dark">
                  </div>
                  <div class="card-body small">
                      $imagickFormats = \Imagick::queryformats();
                  </div>
                  <div class="card-footer text-right">
                    <form action="" method="post">
                      <input type="hidden" name="action" value="convert.webp">
                    </form>
                  </div>
                </div>
              </div>

              $missingExtensions = getMissingExtensions( ['dom', 'libxml', 'mbstring'] );
              <div class="col mb-4">
                <div class="card h-100 shadow">
                  <div class="card-header text-white bg-dark">
                  </div>
                  <div class="card-body small">
                  </div>
                  <div class="card-footer text-right">
                    <form action="" method="post">
                      <input type="hidden" name="action" value="update.pages.depth">
                      </button>
                    </form>
                  </div>
                </div>
              </div>

                <div class="col mb-4">
                  <div class="card h-100 shadow">
                    <div class="card-header text-white bg-dark">
                    </div>
                    <div class="card-body small">
                    </div>
                    <div class="card-footer text-right">
                      <form action="" method="post">
                        <input type="hidden" name="action" value="edit.htaccess">
                      </form>
                    </div>
                  </div>
                </div>


                <div class="col mb-4">
                  <div class="card h-100 shadow">
                    <div class="card-header text-white bg-dark">
                    </div>
                    <div class="card-body small">
                      $convertedWebsites = getConvertedWebsites();
                      foreach ( $convertedWebsites as $convertedWebsite ) {
                        <div>
                          <i class="far fa-file-archive fa-fw"></i>
                          </a>
                        </div>
                      }
                    </div>

                    <div class="card-footer small">
                      <div class="d-flex align-items-center">
                        <div class="mr-auto">
                          <a href="#div_export_flat_file" class="expand-label text-dark" data-toggle="collapse" data-target="#div_export_flat_file" aria-expanded="false" aria-controls="div_export_flat_file">
                          </a>
                        </div>
                          <div class="mr-2">
                            <form action="" method="post">
                              <input type="hidden" name="action" value="fun.convert.website.delete">
                              <button type="submit" class="btn btn-sm btn-danger">
                            </form>
                          </div>
                        <div class="">
                          <form action="" method="post" class="form-wait" id="form_convert_website">
                            <input type="hidden" name="action" value="fun.convert.website">
                            <button type="submit" class="btn btn-sm btn-primary">
                          </form>
                        </div>
                      </div>
                      <div class="collapse mt-2" id="div_export_flat_file">
                        <div class="custom-control custom-checkbox mt-2">
                          <input id="tool_convert_website_strip_queries" form="form_convert_website" type="checkbox" class="custom-control-input" name="options[strip_queries]" value="1" checked>
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              <div class="col mb-4">
                <div class="card h-100 shadow">
                  <div class="card-header text-white bg-dark">
                  </div>
                  <div class="card-body small">
                  </div>
                  <div class="card-footer text-right">
                    <form action="" method="post">
                      <input type="hidden" name="action" value="convert.www">
                        <input type="hidden" name="www" value="1">
                        <input type="hidden" name="www" value="0">
                      <button type="submit" class="btn btn-sm btn-primary">
                      </button>
                    </form>
                  </div>
                </div>
              </div>

              <div class="col mb-4">
                <div class="card h-100 shadow">
                  <div class="card-header text-white bg-dark">Cloudflare</div>
                  <div class="card-body small">
                    if ( !empty( $acmsCloudflare ) ) {
                      $devModeTimeRemaining = !empty( $acmsCloudflare['data']['dev_mode_time_remaining'] ) ? $acmsCloudflare['data']['dev_mode_time_remaining'] - time() : 0;
                      <div class="alert-info p-3 my-3 rounded">
                        Dev
                        <br>
                      </div>
                      <div class="row">
                        <div class="col-xs-auto col-xl-6">
                          <form action="" method="post" class="mb-3">
                            <input type="hidden" name="action" value="api.cloudflare.purge.cache">
                          </form>
                        </div>
                        <div class="col-xs-auto col-xl-6">
                          <form action="" method="post" class="">
                            <input type="hidden" name="action" value="api.cloudflare.development.mode">
                          </form>
                        </div>
                      </div>
                      <form action="" method="post" class="needs-validation mt-3" novalidate>
                        <div class="form-group">
                          <label for="input_cf_zone_id">Zone ID</label>
                          <input type="text" class="form-control form-control-sm text-monospace" name="zone_id" id="input_cf_zone_id" pattern="[\w]{32}" autocorrect="off" autocapitalize="none" required>
                        </div>
                        <div class="form-group">
                          <label for="input_cf_token">API token</label>
                          <div class="input-group mb-3">
                            <input type="text" class="form-control form-control-sm text-monospace" name="token" id="input_cf_token" pattern="[-\w]{40}" autocorrect="off" autocapitalize="none" required>
                            <div class="input-group-append">
                            </div>
                          </div>
                        </div>
                        <input type="hidden" name="action" value="api.cloudflare.create">
                      </form>
                  </div>
                  <div class="card-footer text-right">
                    <div class="float-left w-25 text-left">
                      <div class="logo-cloudflare" style="height:2em;"></div>
                    </div>
                      <form action="" method="post">
                        <input type="hidden" name="action" value="api.cloudflare.remove">
                      </form>
                  </div>
                </div>
              </div>

                <div class="col mb-4">
                  <div class="card h-100 shadow">
                    <div class="card-header text-white bg-info">
                    </div>
                    <div class="card-body small">
                    </div>
                    <div class="card-footer text-right">
                      <form action="" method="post">
                        <input type="hidden" name="action" value="import.urls.list">
                      </form>
                    </div>
                  </div>
                </div>

                $missingExtensions = getMissingExtensions( ['openssl'] );
                <div class="col mb-4">
                  <div class="card h-100 shadow">
                    <div class="card-header text-white bg-info">
                    </div>
                    <div class="card-body small">
                        <div class="text-center mt-3">
                        </div>
                        <form id="form_tool_api_key" action="" method="post" class="d-inline needs-validation" novalidate>
                          <input type="hidden" name="action" value="api.key.set">
                          <div class="form-group mt-3">
                          </div>
                        </form>
                    </div>
                    <div class="card-footer text-right">
                        <form class="d-inline" action="" method="post">
                          <input type="hidden" name="action" value="api.key.remove">
                        </form>
                    </div>
                  </div>
                </div>

                <div class="col mb-4">
                  <div class="card h-100 shadow">
                    <div class="card-header text-white bg-info">
                    </div>
                    <div class="card-body small">
                    </div>
                    <div class="card-footer text-right">
                      <form action="" method="post">
                        <input type="hidden" name="action" value="update.urls.meta">
                        <button type="submit" class="btn btn-sm btn-primary">
                      </form>
                    </div>
                  </div>
                </div>

            </div>


            <div>
              <form action="" method="post" id="form_import_uuid" class="needs-validation form-wait" novalidate>
                <div class="input-group">
                  <div class="input-group-append">
                  </div>
                </div>
                <input type="hidden" name="action" value="download.serial">
              </form>

              <div class="d-flex align-items-center text-secondary small text-uppercase">
                <div class="w-100">
                  <hr class="my-0">
                </div>
                <div class="w-100">
                  <hr class="my-0">
                </div>
              </div>

              <form action="" method="post" id="form_import_upload" enctype="multipart/form-data" class="needs-validation form-wait" novalidate>
                <div class="input-group">
                  <div class="custom-file">
                    <input type="file" class="custom-file-input input-upload-file" name="import_file" accept=".zip,application/zip,application/octet-stream,application/x-zip-compressed,multipart/x-zip" id="input_import_file" aria-describedby="button_import_file" required>
                  </div>
                  <div class="input-group-append">
                  </div>
                </div>
                <input type="hidden" name="action" value="import.upload">
              </form>
            </div>

            $imports = getImportsList();
              <div class="bg-light rounded border shadow-sm p-3 mt-2 mb-1">
                <div class="row">
                  <div class="col-12 col-md-3 mb-3">
                  </div>
                  <div class="col-12 col-md-6 mb-3">
                    <div class="text-uppercase h5 text-truncate">
                    </div>
                    <div class="small"><i class="far fa-file-archive fa-fw"></i>
                      <span class="text-monospace">
                  </span>
                    </div>
                    <div class="small text-muted">
                    </div>
                  </div>
                  <div class="col-12 col-md-3">
                    </button>
                      <input type="hidden" name="action" value="import.perform.reinstall">
                    </form>
                    <form action="" method="post">
                      <input type="hidden" name="action" value="import.remove">
                      <button class="btn btn-block btn-danger" type="submit">
                    </form>

                  </div>
                </div>


                      <div class="mb-3">
                        <table class="table table-striped table-sm table-responsive">
                          <thead>
                          <tr>
                            <td class="w-100">
                              <div class="form-check font-weight-bold">
                              </div>
                            </td>
                          </tr>
                          </thead>
                            <tr>
                              <td>
                                <div class="form-check">
                                </div>
                              </td>
                            </tr>
                        </table>
                      </div>

                      <div class="custom-control custom-checkbox mb-0">
                        <input type="hidden" name="settings[acms_settings]" value="0">
                      </div>

                      <div class="custom-control custom-checkbox mb-0">
                        <input type="hidden" name="settings[loader_settings]" value="0">
                      </div>

                      <div class="custom-control custom-checkbox mb-0">
                        <input type="hidden" name="settings[templates]" value="0">
                            <li class="list-group-item list-group-item-action py-1 text-nowrap text-truncate text-monospace rounded-0">
                            </li>
                        </div>
                      </div>

                      <div class="custom-control custom-checkbox mb-0">
                        <input type="hidden" name="settings[custom_includes]" value="0">
                            <li class="list-group-item list-group-item-action px-0 py-1 text-nowrap text-truncate text-monospace rounded-0">
                            </li>
                        </div>
                        <div class="small text-danger mt-1">
                        </div>
                      </div>

                    <div class="custom-control custom-radio mt-3">
                    </div>
                    <div class="custom-control custom-radio">
                    </div>
                    <div class="custom-control custom-radio">
                    </div>

                    <div class="custom-control custom-checkbox mt-3">
                      <input type="hidden" name="settings[submerge]" value="0">
                    </div>

                    <div class="form-group mt-3">
                      <div class="input-group">
                        <div class="input-group-append">
                        </div>
                      </div>
                    </div>

                    <div class="form-group">
                      <div class="input-group">
                        <div class="input-group-prepend">
                        </div>
                      </div>
                    </div>

                    <div class="text-right">
                    </div>
                    <input type="hidden" name="action" value="import.perform">
                  </form>
                </div>

                </div>

              </div>
            }
              <div class="bg-light rounded border shadow p-3 mt-2 mb-1">
                <div class="row">
                  <div class="col-12 col-md-3 mb-3">
                    <div class="border border-danger alert-danger rounded w-100 text-center p-3 embed-responsive embed-responsive-16by9 d-flex">
                    </div>
                  </div>
                  <div class="col-12 col-md-6 mb-3">
                  </div>
                  <div class="col-12 col-md-3">
                      <form action="" method="post" class="needs-validation" novalidate>
                        <div class="form-group">
                        </div>
                        <input type="hidden" name="action" value="fun.md">
                        <button class="btn btn-block btn-primary mb-3" type="submit">
                      </form>
                    <form action="" method="post">
                      <input type="hidden" name="action" value="import.remove">
                      <button class="btn btn-block btn-danger" type="submit">
                    </form>
                  </div>
                </div>
              </div>

            <div class="d-flex align-items-center text-secondary small text-uppercase">
              <div class="w-100">
                <hr class="my-0">
              </div>
              <div class="w-100">
                <hr class="my-0">
              </div>
            </div>

            <div class="bg-light rounded border shadow-sm p-3">
              <form action="" method="post" class="needs-validation form-wait" novalidate>
                <input type="hidden" name="action" value="export.perform">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#exportSettings" aria-expanded="false" aria-controls="exportSettings">
                      <i class="fas fa-caret-down fa-fw"></i></button>
                  </div>
                  <div class="input-group-append">
                  </div>
                </div>
                <div class="collapse mt-2 bg-light" id="exportSettings">
                  unset( $import );
                  $import['info'] = getInfoFromDatabase( $dsn );
                    <div class="mb-3">
                      <table class="table table-striped table-sm table-responsive">
                        <thead>
                        <tr>
                          <td class="w-100">
                            <div class="form-check font-weight-bold">
                            </div>
                          </td>
                        </tr>
                        </thead>
                          <tr>
                            <td>
                              <div class="form-check">
                              </div>
                            </td>
                          </tr>
                      </table>
                    </div>

                  <div class="custom-control custom-checkbox">
                    <input id="export_check_all" class="custom-control-input check-all-switch" data-target="check-all-export" type="checkbox">
                  </div>
                  <hr class="my-1">
                  <div class="custom-control custom-checkbox">
                    <input type="hidden" name="settings[acms_settings]" value="0">
                    <input id="export_settings_cms" class="custom-control-input check-all-export" type="checkbox" name="settings[acms_settings]" value="1">
                  </div>
                  <div class="custom-control custom-checkbox">
                    <input type="hidden" name="settings[loader_settings]" value="0">
                    <input id="export_settings_loader" class="custom-control-input check-all-export" type="checkbox" name="settings[loader_settings]" value="1">
                  </div>
                  <div class="custom-control custom-checkbox">
                    <input type="hidden" name="settings[custom_files]" value="0">
                    <input id="export_settings_custom_files" class="custom-control-input check-all-export" type="checkbox" name="settings[custom_files]" value="1">
                  </div>
                  <div class="custom-control custom-checkbox">
                    <input type="hidden" name="settings[templates]" value="0">
                    <input id="export_settings_template" class="custom-control-input check-all-export" type="checkbox" name="settings[templates]" value="1">
                  </div>
                </div>
              </form>
            </div>


          if ( $section == 'search' ) {
              <div class="rounded bg-danger text-light p-3 mb-3">
              </div>

            <ul class="nav nav-pills nav-justified mb-2" id="searchTab" role="tablist">
              <li class="nav-item">
              </li>
              <li class="nav-item">
              </li>
            </ul>

            <div class="tab-content" id="searchTab">
                <div class="mb-3 rounded p-3 bg-dark text-light border">
                  <form action="" method="post" class="needs-validation" novalidate>
                    <div class="form-group">
                    </div>
                    <div class="form-group">
                    </div>


                    <div class="custom-control custom-checkbox">
                      <input type="hidden" name="regex" value="0"/>
                      <a href="#" class="text-primary small" data-toggle="modal" data-target="#regexModal"><i class="fas fa-info-circle"></i></a>
                    </div>
                    <div class="custom-control custom-checkbox">
                      <input type="hidden" name="case_sensitive" value="0"/>
                    </div>
                    <div class="custom-control custom-checkbox">
                      <input type="hidden" name="text_files_search" value="0"/>
                    </div>
                    <div class="mt-3">
                      <div class="search-filter-wrapper search-code-filter-wrapper">
                          foreach ( $_POST['filter']['param'] as $filterNum => $filterVal ) {
                            if ( !strlen( $_POST['filter']['text'][$filterNum] ) ) continue;
                            $filterCur = [
                              'param'          => $_POST['filter']['param'][$filterNum],
                              'operator'       => $_POST['filter']['operator'][$filterNum],
                              'text'           => $_POST['filter']['text'][$filterNum],
                              'regex'          => $_POST['filter']['regex'][$filterNum],
                              'case_sensitive' => $_POST['filter']['case_sensitive'][$filterNum],
                            ];
                            <div class="search-filter-block rounded-bottom bg-light text-dark p-0 small mb-3 position-relative ">
                              <div class="position-absolute" style="top:-10px; right:-10px;">
                            <span class="fa-stack remove-search-filter bg-transparent cursor-link">
                              <i class="fas fa-circle fa-stack-2x fa-fw text-danger"></i>
                              <i class="fas fa-trash-alt fa-stack-1x fa-fw fa-inverse"></i>
                            </span>
                              </div>
                              <hr class="bg-success p-1 m-0">
                              <div class="p-3">
                                <div class="form-row">
                                  <div class="col-12 col-sm-6">
                                    <select name="filter[param][]" class="form-control mb-2 search-filter-param">
                                    </select>
                                  </div>
                                  <div class="col-12 col-sm-6">
                                    <select name="filter[operator][]" class="form-control mb-2 search-filter-operator">
                                    </select>
                                  </div>
                                  <div class="col-12">
                                    <div class="form-group mb-2">
                                    </div>
                                  </div>
                                    <div class="form-check" style="line-height:1 !important;">
                                      <label class="form-check-label">
                                    </div>
                                  </div>
                                    <div class="form-check" style="line-height:1 !important;">
                                      <label class="form-check-label">
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                      </div>

                      <button type="button" class="btn btn-success btn-sm mb-3 mr-2 search-code-add-filter">

                    </div>

                    <input type="hidden" name="action" value="searchreplace.code"/>

                    <div class="text-center">
                    </div>
                  </form>
                </div>
              </div>

                <div class="mb-3 rounded p-3 bg-search-url text-dark border">
                  <form action="" method="post" class="needs-validation" novalidate>
                    <div class="form-group">
                      </label>
                    </div>
                    <div class="form-group">
                    </div>

                    <div class="custom-control custom-checkbox">
                      <input type="hidden" name="regex" value="0"/>
                      <a href="#" class="text-primary small" data-toggle="modal" data-target="#regexModal"><i class="fas fa-info-circle"></i></a>
                    </div>
                    <div class="custom-control custom-checkbox">
                      <input type="hidden" name="case_sensitive" value="0"/>
                    </div>
                    <div class="custom-control custom-checkbox">
                      <input type="hidden" name="text_files_search" value="0"/>
                    </div>
                    <div class="mt-3">
                      <div class="search-filter-wrapper search-url-filter-wrapper">
                          foreach ( $_POST['filter']['param'] as $filterNum => $filterVal ) {
                            if ( !strlen( $_POST['filter']['text'][$filterNum] ) ) continue;
                            $filterCur = [
                              'param'          => $_POST['filter']['param'][$filterNum],
                              'operator'       => $_POST['filter']['operator'][$filterNum],
                              'text'           => $_POST['filter']['text'][$filterNum],
                              'regex'          => $_POST['filter']['regex'][$filterNum],
                              'case_sensitive' => $_POST['filter']['case_sensitive'][$filterNum],
                            ];
                            <div class="search-filter-block rounded-bottom bg-light text-dark p-0 small mb-3 position-relative ">
                              <div class="position-absolute" style="top:-10px; right:-10px;">
                            <span class="fa-stack remove-search-filter bg-transparent cursor-link">
                              <i class="fas fa-circle fa-stack-2x fa-fw text-danger"></i>
                              <i class="fas fa-trash-alt fa-stack-1x fa-fw fa-inverse"></i>
                            </span>
                              </div>
                              <hr class="bg-success p-1 m-0">
                              <div class="p-3">
                                <div class="form-row">
                                  <div class="col-12 col-sm-6">
                                    <select name="filter[param][]" class="form-control mb-2 search-filter-param">
                                    </select>
                                  </div>
                                  <div class="col-12 col-sm-6">
                                    <select name="filter[operator][]" class="form-control mb-2 search-filter-operator">
                                    </select>
                                  </div>
                                  <div class="col-12">
                                    <div class="form-group mb-2">
                                    </div>
                                  </div>
                                    <div class="form-check" style="line-height:1 !important;">
                                      <label class="form-check-label">
                                    </div>
                                  </div>
                                    <div class="form-check" style="line-height:1 !important;">
                                      <label class="form-check-label">
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                      </div>

                      <button type="button" class="btn btn-success btn-sm mb-3 mr-2 search-url-add-filter">

                      <button type="button" class="btn btn-primary btn-sm mb-3" data-toggle="collapse" data-target="#searchUrlEditMetadata" aria-expanded="false" aria-controls="searchUrlEditMetadata">

                        <div class="bg-light rounded-bottom px-3 pt-3">
                          <div class="row">
                            <div class="col-12 col-md-6">
                              <div class="form-group">
                              </div>
                            </div>
                            <div class="col-12 col-md-6">
                              <div class="form-group">
                              </div>
                            </div>
                            <div class="col-12 col-md-6">
                              <div class="form-group">
                              </div>
                            </div>
                            <div class="col-12 col-md-6">
                              <div class="form-group">
                              </div>
                            </div>
                            <div class="col-12 col-md-6">
                              <div class="form-group">
                              </div>
                            </div>
                          </div>
                        </div>
                      </div

                    </div>
                    <input type="hidden" name="action" value="searchreplace.url"/>

                    <div class="text-center">
                    </div>
                  </form>
                </div>
              </div>


              <div class="search-filter-block d-none rounded-bottom bg-light text-dark p-0 small mb-3 position-relative ">
                <div class="position-absolute" style="top:-10px; right:-10px;">
                <span class="fa-stack remove-search-filter bg-transparent cursor-link">
                  <i class="fas fa-circle fa-stack-2x fa-fw text-danger"></i>
                  <i class="fas fa-trash-alt fa-stack-1x fa-fw fa-inverse"></i>
                </span>
                </div>
                <hr class="bg-secondary p-1 m-0">
                <div class="p-3">
                  <div class="form-row">
                    <div class="col-12 col-sm-6">
                      <select name="filter[param][]" class="form-control mb-2 search-filter-param">
                      </select>
                    </div>
                    <div class="col-12 col-sm-6">
                      <select name="filter[operator][]" class="form-control mb-2 search-filter-operator">
                      </select>
                    </div>
                    <div class="col-12">
                      <div class="form-group mb-2">
                        <textarea name="filter[text][]" class="form-control search-filter-text text-monospace" placeholder=""></textarea>
                      </div>
                    </div>
                    <div class="col-12 search-filter-regex-div mb-1">
                      <div class="form-check" style="line-height:1 !important;">
                        <label class="form-check-label">
                          <input type="hidden" class="search-filter-regex" name="filter[regex][]" value="0"/>
                          <input type="checkbox" class="form-check-input search-filter-regex-checkbox" style="margin-top: 0 !important;">
                      </div>
                    </div>
                    <div class="col-12 search-filter-case-sensitive-div">
                      <div class="form-check" style="line-height:1 !important;">
                        <label class="form-check-label">
                          <input type="hidden" class="search-filter-case-sensitive" name="filter[case_sensitive][]" value="0"/>
                          <input type="checkbox" class="form-check-input search-filter-case-sensitive-checkbox" style="margin-top: 0 !important;">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

              <div class="text-center mb-3">
                <form action="" method="post" id="form_confirm_remove" class="form-wait">
                  <input type="hidden" name="perform" value="remove"/>
                  <button type="button" class="btn btn-danger btn-action" data-toggle="modal" data-target="#confirm-action" data-source="form_confirm_remove">
                  </button>
                </form>
              </div>

              <div class="text-center mb-3">
                <form action="" method="post" id="form_confirm_replace" class="form-wait">
                  <input type="hidden" name="perform" value="replace"/>
                  <button type="button" class="btn btn-success btn-action" data-toggle="modal" data-target="#confirm-action" data-source="form_confirm_replace">
                  </button>
                </form>
              </div>
            if ( !isset( $_POST['perform'] ) && count( $searchResults ) > 2 ) {
              $searchCount  = $searchResults['total_urls'];
              $totalMatches = $searchResults['total_matches'];
              $limitReached = $searchResults['limit_reached'];
              unset( $searchResults['total_urls'] );
              unset( $searchResults['total_matches'] );
              unset( $searchResults['limit_reached'] );

              <div class="text-right small pb-3">
                <em>
                </em>
              </div>
                <div class="bg-warning p-3 rounded border mb-3">
                </div>

              if ( empty( $searchResult['results'] ) ) {
                continue;
              <div class="bg-light border rounded p-3 mb-2 search-result">
                <div class="row">
                  <div class="col order-sm-1 order-2">
                    <div class="h5 text-monospace text-break">
                    </div>
                  </div>

                  <div class="col-sm-auto col-12 text-center text-sm-right text-nowrap order-1 order-sm-2 mb-3 mb-sm-0">
                        <input type="hidden" name="action" value="remove.url"/>
                        <input type="hidden" name="ajax" value="1"/>
                          <i class="fas fa-trash-alt fa-fw"></i></button>
                      </form>
                    <form target="_blank" action="" method="post" class="form-inline d-inline">
                      <input type="hidden" name="show" value="edit.url"/>
                        <i class="fas fa-edit fa-fw"></i></button>
                    </form>
                      <i class="fas fa-landmark fa-fw"></i>
                    </a>
                    <div class="small text-monospace text-center">
                    </div>
                  </div>
                </div>
                foreach ( $searchResult['results'] as $searchCode ) {
                  $n++;
                    <div class="mt-2 mb-0">
                    </div>
                    <div class="bg-success text-light rounded p-2">
                      <div class="bg-success text-light rounded p-2">
                        <small>
                          </small>
                        </small>
                      </div>
                    </div>
                  }
                  if ( $searchResult['type'] == 'replace' ) {
                    <div class="mt-2 mb-0">
                    </div>
                    <div class="bg-success text-light rounded-top p-2">
                      <small>
                        </small>
                      </small>
                    </div>
                    <div class="bg-warning rounded-bottom mt-0 p-2">
                    </div>

                  }
              </div>
            }
              <div class="text-center mb-3">
                <form action="" method="post" id="form_send_import_urls">
                  <input type="hidden" name="action" value="import.urls.list"/>
                  <button type="submit" class="btn btn-success">
                  </button>
                </form>
              </div>

                <thead class="thead-light">
                </tr>
                </thead>
                <tbody>
                <pre>
                  <tr>
                  </tr>
                </tbody>
              </table>
          }

            <div class="border p-0 mb-3 rounded">
              <div class="row m-3">
                <div class="col-12 col-sm-auto p-1">
                  <form class="d-inline" id="form_missing_urls_clear" action="" method="post">
                    <input type="hidden" name="action" value="missing.clear">
                    <input type="hidden" name="all" value="1">
                    <button type="submit" class="btn btn-danger m-1 btn-block">
                  </form>
                </div>
                <div class="col-12 col-sm-auto p-1">
                  <form class="d-inline" id="form_missing_urls_refresh" action="" method="post">
                    <input type="hidden" name="action" value="missing.show">
                    <button type="submit" class="btn btn-primary m-1 btn-block">
                  </form>
                </div>
              </div>
            </div>
                <thead class="thead-light">
                <th data-field="wbm" data-sortable="false" data-visible="true" data-align="center">WBM</th>
                <th data-field="google" data-sortable="false" data-visible="true" data-align="center">Google</th>
                </tr>
                </thead>
                <tbody>
                    <td data-search="false">
                    </td>
                    <td data-search="false">
                    </td>
                    <td data-search="false">
                      $missingUrl['mime'] = getMimeByExtension( pathinfo( parse_url( $missingUrl['url'], PHP_URL_PATH ), PATHINFO_EXTENSION ) );
                        <i class="fas fa-file fa-fw"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            }
          }

          // EDIT URL
          if ( isset( $_POST['urlID'], $_POST['show'] ) && $_POST['show'] == 'edit.url' ) {
            $docBkpsCount = getBackupsCountByDocumentId( $metaData['rowid'] );
            <div class="border p-0 mb-3 rounded">
              <div class="row m-3">
                <div class="col-12 col-sm-auto p-1">
                </div>
                <div class="col-12 col-sm-auto p-1">
                  <a href="#" class="btn btn-primary my-1 btn-block" data-toggle="modal" data-target="#cloneModal">
                </div>
                <div class="col-12 col-sm-auto p-1">
                  <form action="" method="post" class="d-inline">
                    <input type="hidden" name="action" value="download.url"/>
                    <input type="hidden" name="show" value="edit.url"/>
                    <button type="submit" class="btn btn-primary my-1 btn-block">
                  </form>
                </div>
                  <div class="col-12 col-sm-auto p-1">
                    <a href="#" class="btn btn-primary my-1 btn-block" data-toggle="modal" data-target="#templateModal">
                  </div>
                <div class="col-12 col-sm-auto p-1">
                    <input type="hidden" name="action" value="remove.url"/>
                  </form>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-12 col-xl-10 mb-3">
                <div class="border rounded p-3">
                  <form action="" method="post" class="needs-validation" novalidate>
                    <div class="row">
                      <div class="col-12 col-md-6">

                        <div class="form-group row">
                          <div class="col-sm-10">
                          </div>
                        </div>

                        <div class="form-group row">
                          <div class="col-sm-10">
                          </div>
                        </div>

                        <div class="form-group row">
                          <div class="col-sm-10">
                          </div>
                        </div>

                          <div class="form-group row">
                            <div class="col-sm-10 small text-info align-self-center text-monospace">
                            </div>
                          </div>

                      </div>

                      <div class="col-12 col-md-6">

                        <div class="form-group row">
                          <div class="col-sm-10">
                          </div>
                        </div>

                        <div class="form-group row">
                          <div class="col-sm-10">
                            <div class="input-group input-group-sm">
                              <div class="input-group-append">
                              <span class="input-group-text">
                                <i class="fas fa-landmark"></i>
                                </a>
                              </span>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="form-group row">
                          <div class="col-sm-10">
                            <div class="form-group form-check mb-2">
                              <input type="hidden" name="enabled" value="0">
                              <label class="form-check-label col-form-label-sm" for="enabledCheck">
                              </label>
                            </div>
                          </div>
                        </div>

                          <div class="form-group row">
                            <div class="col-sm-10 small text-info align-self-center text-monospace">
                            </div>
                          </div>

                      </div>

                    </div>

                    <div class="text-center text-lg-right">
                      <input type="hidden" name="action" value="update.url.settings"/>
                      <input type="hidden" name="show" value="edit.url"/>
                      <button type="submit" class="btn btn-sm btn-primary">
                    </div>
                  </form>
                </div>
              </div>
              <div class="col-12 col-xl-2 mb-3">
                  <div class="dz-message">
                  <div class="fallback">
                    <input name="file" type="file" multiple/>
                  </div>
                  <input type="hidden" name="action" value="update.url.upload"/>
                  <input type="hidden" name="show" value="edit.url"/>
                </form>
              </div>
            </div>
            <!-- PREVIEW AREA -->
              <div class="bg-warning p-3 rounded text-center">
              </div>
            if ( !$metaData['redirect'] && $metaData['enabled'] ) {
              $metaData['mime'] = getMimeInfo( $metaData['mimetype'] );
              switch ( $metaData['mime']['type'] ) {
                case 'html' :
                case 'text' :
                case 'code' :
                  $isHtml = $metaData['mime']['type'] == 'html' ? true : false;
                  <ul class="nav nav-tabs mb-3" role="tablist" style="flex-wrap: inherit;">
                      <li class="nav-item">
                      </li>
                    <li class="nav-item">
                    </li>
                      <li class="nav-item">
                      </li>
                  </ul>
                  <div class="tab-content">
                        <form action="" method="post" onsubmit="ajaxSaveFile('formHtml'); return false;" id="formHtml">
                          <input type="hidden" name="action" value="update.url.content"/>
                          <input type="hidden" name="show" value="edit.url"/>
                          <input type="hidden" name="ajax" value="1"/>
                          <button type="submit" class="btn btn-primary float-right my-3">
                        </form>
                      </div>
                        <input type="hidden" name="action" value="update.url.content"/>
                        <input type="hidden" name="show" value="edit.url"/>
                        <input type="hidden" name="ajax" value="1"/>
                        <button type="submit" class="btn btn-primary float-right mt-3" id="cmSave" style="display: block; position: fixed; bottom: 30px; right: 30px; z-index: 99;">
                      </form>
                    </div>
                      <div class="tab-pane fade" id="backups" role="tabpanel" aria-labelledby="backups-tab">
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="showUnmodified">
                        </div>
                        if ( $docBkpsCount ) {
                          $pdo  = newPDO();
                          $pdo2 = newPDO();
                          $stmt = $pdo->prepare( "SELECT rowid, * FROM backup WHERE id = :documentId ORDER BY rowid DESC" );
                          $stmt->bindParam( 'documentId', $metaData['rowid'], PDO::PARAM_INT );
                          $stmt->execute();
                          $docBkpNum = 0;
                          // loop here to save memory vs storing add changes in array
                          while ( $docBkp = $stmt->fetch( PDO::FETCH_ASSOC ) ) {
                            $docBkp['settings'] = json_decode( $docBkp['settings'], true );
                            if ( $docBkpNum == 0 ) {
                              $docBkpCurrentPath    = $sourcePath . DIRECTORY_SEPARATOR . $metaData['folder'] . DIRECTORY_SEPARATOR . $metaData['filename'];
                              $docBkpCurrentCharset = $metaData['charset'];
                              $docBkpCurrentMime    = $metaData['mimetype'];
                              $docBkpNextPath       = $sourcePath . DIRECTORY_SEPARATOR . 'backup' . DIRECTORY_SEPARATOR . $docBkp['filename'];
                              $docBkpNextCharset    = $docBkp['settings']['charset'];
                              $docBkpNextMime       = $docBkp['settings']['mimetype'];
                              if (
                                getMimeInfo( $docBkpCurrentMime )['folder'] != 'html' ||
                                getMimeInfo( $docBkpNextMime )['folder'] != 'html'
                              ) $docBkpChanges = '';
                              else {
                                $docBkpChanges = compareToHTML(
                                  compare(
                                    convertEncoding( file_get_contents( $docBkpNextPath ), 'UTF-8', $docBkpNextCharset ),
                                    convertEncoding( file_get_contents( $docBkpCurrentPath ), 'UTF-8', $docBkpCurrentCharset ),
                                    false
                                  ), '' );
                              }
                              <div class="d-flex align-items-center mt-3 mb-1">
                                <div class="mr-2 text-nowrap">
                                </div>
                                <div class="w-100">
                                  <hr class="my-0">
                                </div>
                                <div class="ml-2 text-nowrap">
                                    <input type="hidden" name="action" value="history.recover.url">
                                    <input type="hidden" name="show" value="edit.url">
                                    <button class="btn badge btn-danger border-0">
                                  </form>
                                </div>
                              </div>
                              <div class="revisions text-monospace small">
                              </div>
                            }
                            $stmt2 = $pdo->prepare( "SELECT rowid, * FROM backup WHERE id = :documentId AND rowid < :rowid ORDER BY rowid DESC LIMIT 1" );
                            $stmt2->bindParam( 'documentId', $metaData['rowid'], PDO::PARAM_INT );
                            $stmt2->bindParam( 'rowid', $docBkp['rowid'], PDO::PARAM_INT );
                            $stmt2->execute();
                            $docBkpNext = $stmt2->fetch( PDO::FETCH_ASSOC );
                            if ( !empty( $docBkpNext ) ) {
                              $docBkpNext['settings'] = json_decode( $docBkpNext['settings'], true );
                              $docBkpCurrentPath      = $sourcePath . DIRECTORY_SEPARATOR . 'backup' . DIRECTORY_SEPARATOR . $docBkp['filename'];
                              $docBkpCurrentCharset   = $docBkp['settings']['charset'];
                              $docBkpCurrentMime      = $docBkp['settings']['mimetype'];
                              $docBkpNextPath         = $sourcePath . DIRECTORY_SEPARATOR . 'backup' . DIRECTORY_SEPARATOR . $docBkpNext['filename'];
                              $docBkpNextCharset      = $docBkpNext['settings']['charset'];
                              $docBkpNextMime         = $docBkpNext['settings']['mimetype'];
                              if (
                                getMimeInfo( $docBkpCurrentMime )['folder'] != 'html' ||
                                getMimeInfo( $docBkpNextMime )['folder'] != 'html'
                              ) $docBkpChanges = '';
                              else {
                                $docBkpChanges = compareToHTML( compare(
                                  convertEncoding( file_get_contents( $docBkpNextPath ), 'UTF-8', $docBkpNextCharset ),
                                  convertEncoding( file_get_contents( $docBkpCurrentPath ), 'UTF-8', $docBkpCurrentCharset ),
                                  false
                                ), '' );
                              }
                              <div class="d-flex align-items-center mt-3 mb-1">
                                <div class="mr-2 text-nowrap">
                                </div>
                                <div class="w-100">
                                  <hr class="my-0">
                                </div>
                                <div class="ml-2 text-nowrap">
                                    <input type="hidden" name="action" value="history.recover.url">
                                    <input type="hidden" name="show" value="edit.url">
                                    <button class="btn badge btn-danger border-0">
                                  </form>
                                </div>
                              </div>
                              <div class="revisions text-monospace small">
                              </div>
                            }
                            $docBkpNum++;
                        }
                      </div>
                  </div>
                  break;

                case 'video' :
                  <div class="text-center p-3 mb-3">
                  </div>
                  break;

                case 'audio' :
                  <div class="text-center p-3 mb-3">
                  </div>
                  break;

                case 'image' :
                  <div class="text-center p-3 mb-3 bg-image rounded">
                  break;
                case 'pdf' :
                  break;
                default :
                  <div class="bg-secondary text-light p-3 rounded text-center p-3 mb-3">
                    <div>
                    </div>
                  </div>
                  break;
              }
            }
          }


            $backupsStats     = getBackups( 'stats' );
            $backupsSize      = getDirectorySize( $sourcePath . DIRECTORY_SEPARATOR . 'backup' );
            $freeDiskSpace    = function_exists( 'disk_free_space' ) ? disk_free_space( $sourcePath ) : null;
            $importsStats     = getImportsSize();
            $missingUrlsStats = getMissingUrls( 'stats' );
            <div class="card border-0 shadow mb-3">
              <div class="card-header bg-dark text-light">
              </div>
              <div class="card-body mb-0">
                <div class="row">
                  <div class="col-12 col-md-6 small">
                    <table class="table table-sm table-hover mb-3">
                      <thead class="thead-light">
                      <tr>
                      </tr>
                      </thead>
                      <tr>
                        <td class="text-monospace">
                          </a>
                        </td>
                      </tr>
                      <tr>
                      </tr>
                      <tr>
                      </tr>
                      <tr>
                      </tr>
                      <tr>
                        <td>
                          <form method="post" action="" class="d-inline">
                            <input type="hidden" name="action" value="history.edit">
                            <button type="submit" class="btn btn-link btn-sm text-left p-0">
                            </button>
                          </form>
                            <div class="text-danger text-uppercase">
                            </div>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <form method="post" action="" class="d-inline">
                            <input type="hidden" name="action" value="import.view">
                            <button type="submit" class="btn btn-link btn-sm text-left p-0">
                            </button>
                          </form>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          if ( empty( $missingUrlsStats['total'] ) ) {
                            echo L( 'None' );
                          } else {
                            <form method="post" action="" class="d-inline">
                              <input type="hidden" name="action" value="missing.show">
                              <button type="submit" class="btn btn-link btn-sm text-left p-0">
                              </button>
                            </form>
                          }
                        </td>
                      </tr>
                    </table>
                  </div>

                  <div class="col-12 col-md-6 small">
                    <table class="table table-sm table-hover mb-3">
                      <thead class="thead-light">
                      <tr>
                      </tr>
                      </thead>
                      <tr>
                        <td>
                        </td>
                      </tr>
                      <tr>
                      </tr>
                      <tr>
                        <td>
                          $recommendedExtensions = ['curl', 'dom', 'fileinfo', 'iconv', 'imagick', 'intl', 'json', 'libxml', 'pcre', 'pdo_sqlite', 'zip',];
                          $missingExtensions     = getMissingExtensions( $recommendedExtensions );
                        </td>
                      </tr>
                      <tr>
                      </tr>
                      <tr>
                      </tr>
                      <tr>
                      </tr>
                    </table>
                  </div>
                </div>
                <div class="">
                  <div class="text-right">
                    </a>
                  </div>
                </div>
              </div>
            </div>


            $missingExtensions = getMissingExtensions( ['curl', 'zip'] );
            $loaderInfo        = getLoaderInfo();
            <div class="card border-0 shadow mb-3">
              <div class="card-header bg-dark text-light">
              </div>
              <div class="card-body small">
                <div class="row">
                  <div class="col-12 col-md-6">
                    <table class="table table-hover table-sm table-responsive mb-0">
                      <thead class="thead-light">
                      <tr>
                      </tr>
                      </thead>
                      <tr>
                        <td class="text-nowrap">Archivarix CMS</td>
                      </tr>
                      <tr>
                      </tr>
                    </table>

                  </div>
                  <div class="col-12 col-md-6">

                    <div class="row">
                        <div class="col">
                          <form action="" method="post" id="form_install_loader" class="form-wait">
                            <input type="hidden" name="action" value="install.loader">
                          </form>
                        </div>
                      <div class="col">
                        <div class="text-center">
                        </div>
                      </div>
                      <div class="col">
                        <form action="" method="post" id="form_system_update" class="form-wait">
                          <input type="hidden" name="action" value="update.system">
                        </form>
                      </div>
                    </div>

                    <div class="mx-auto align-self-center">
                      <div id="messageUpdate" class="p-3 text-left"></div>
                    </div>


                  </div>

                </div>

              </div>

            </div>

        </div>
      </div>
    </div>


  <!-- MODALS -->
  <div class="modal fade" id="createNewUrl" tabindex="-1" role="dialog" aria-hidden="false">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <form action="" method="post" id="createNewUrlForm" enctype="multipart/form-data" class="needs-validation" novalidate>
          <div class="modal-header bg-primary text-light">
            <button type="button" class="close text-light" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <div class="input-group">
                <div class="custom-file">
                  <input type="file" class="custom-file-input input-upload-file" name="create_file" id="input_create_url_file" aria-describedby="button_import_file">
                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="invalid-feedback">
              </div>
            </div>
            <div class="form-group">
              <div class="input-group">
                <div class="input-group-append">
                  <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item put-new-url-mime cursor-link" data-mime="text/html" data-charset="utf-8">HTML</a>
                    <a class="dropdown-item put-new-url-mime cursor-link" data-mime="text/css" data-charset="utf-8">CSS</a>
                    <a class="dropdown-item put-new-url-mime cursor-link" data-mime="application/javascript" data-charset="utf-8">JAVASCRIPT</a>
                    <a class="dropdown-item put-new-url-mime cursor-link" data-mime="text/plain" data-charset="utf-8">TEXT</a>
                    <a class="dropdown-item put-new-url-mime cursor-link" data-mime="application/json" data-charset="utf-8">JSON</a>
                    <a class="dropdown-item put-new-url-mime cursor-link" data-mime="image/jpeg" data-charset="">JPEG</a>
                    <a class="dropdown-item put-new-url-mime cursor-link" data-mime="image/png" data-charset="">PNG</a>
                    <a class="dropdown-item put-new-url-mime cursor-link" data-mime="image/gif" data-charset="">GIF</a>
                  </div>
                </div>
              </div>
            </div>
            </a>
            <div class="collapse hide mt-2" id="createNewUrlAdditional">
              <div class="form-group">
              </div>
              <div class="form-group">
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <input type="hidden" name="action" value="create.url">
          </div>
        </form>
      </div>
    </div>
  </div>
    <div class="modal fade" id="regexModal" tabindex="-1" role="dialog" aria-labelledby="templateLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
        <div class="modal-content">
          <div class="modal-header bg-primary text-light">
            <button type="button" class="close text-light" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="alert alert-primary px-3 py-2 d-flex align-items-center">
              <a href="https://regex101.com/" target="_blank" rel="noreferrer noopener" class="btn btn-primary btn-sm ml-auto">
                <i class="fas fa-external-link-alt"></i>
              </a>
            </div>
            <div class="row">
              <div class="col-12 col-xl-6 mb-3">
              </div>
              <div class="col-12 col-xl-6 mb-3">
              </div>
              <div class="col-12 col-xl-6 mb-3">
              </div>
              <div class="col-12 col-xl-6 mb-3">
              </div>
              <div class="col-12 col-xl-6 mb-3">
              </div>
              <div class="col-12 col-xl-6 mb-3">
              </div>
            </div>
          </div>
          <div class="modal-footer border-0">
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="breakpointModal" tabindex="-1" role="dialog" aria-hidden="false">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <form action="" method="post" class="needs-validation" novalidate>
            <div class="modal-header bg-primary text-light">
              <button type="button" class="close text-light" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <div class="invalid-feedback">
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <input type="hidden" name="action" value="history.breakpoint.create">
            </div>
          </form>
        </div>
      </div>
    </div>

  <div class="alert alert-success text-center position-fixed" id="savedAlert" role="alert" style="display: none; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 99;"></div>

  <div class="position-fixed d-none">
    <form id="formUrlsPage" action="" method="post">
      <input type="text" class="pageNumber" name="page">
      <input type="text" class="domainName" name="domain">
      <input type="hidden" name="action" value="change.page">
    </form>
  </div>

  if ( isset( $metaData['rowid'] ) ) {
    <div class="modal fade" id="cloneModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <form action="" method="post" class="needs-validation" novalidate>
            <div class="modal-header bg-primary text-light">
              <button type="button" class="close text-light" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="form-group">
              </div>
              </a>
              <div class="collapse hide mt-2" id="cloneNewUrlAdditional">
                <div class="form-group">
                </div>
              </div>
              <input type="hidden" name="action" value="clone.url"/>
              <input type="hidden" name="show" value="edit.url"/>
            </div>
            <div class="modal-footer border-0">
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="modal fade" id="templateModal" tabindex="-1" role="dialog" aria-labelledby="templateLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <form action="" method="post" class="needs-validation" novalidate>
            <div class="modal-header bg-primary text-light">
              <button type="button" class="close text-light" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <input type="text" class="form-control mb-2 px-3 clear" name="name" id="templateName" value="" pattern="[-\w]{1,64}" autocorrect="off" autocapitalize="none" required/>
              </div>
              <input type="hidden" name="action" value="create.template"/>
            </div>
            <div class="modal-footer border-0">
            </div>
          </form>
        </div>
      </div>
    </div>
  }
} // if logged

<div class="modal hide" id="pleaseWaitDialog" data-backdrop="static" data-keyboard="false">
  <div class="container d-flex align-items-center h-100">
    <div class="w-100 text-center">
      <div class="spinner-grow text-warning mb-3" style="width: 10rem; height: 10rem;" role="status">
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="confirm-action" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body">
        <div class="confirm-message"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-danger" data-dismiss="modal">
        </a>
      </div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js" integrity="sha512-ubuT8Z88WxezgSqf3RLuNi5lmjstiJcyezx34yIU2gAHonIi27Na7atqzUZCOoY4CExaoFumzOsFQ2Ch+I/HCw==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.min.js" integrity="sha512-XKa9Hemdy1Ui3KSGgJdgMyYlUg1gM+QhL6cnlyTe2qzMCYm4nAZ1PsVerQzTTXzonUR+dmswHqgJPuwCq1MaAg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://unpkg.com/tableexport.jquery.plugin/tableExport.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js" integrity="sha512-ToRWKKOvhBSS8EtqSflysM/S7v9bB9V0X3B1+E7xo7XZBEZCPL3VX5SFIp8zxY19r7Sz0svqQVbAOx+QcLQSAQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.14/jspdf.plugin.autotable.min.js" integrity="sha512-m4dz/cB+GDbGitRXh/Ppt8vsDpD2nqhviX1eoD7wgu3xSO2B9EUKjZKsZLbmyUS0d43vLzakJcPFzxi7eHlmBw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.18.3/bootstrap-table.min.js" integrity="sha512-Wm00XTqNHcGqQgiDlZVpK4QIhO2MmMJfzNJfh8wwbBC9BR0FtdJwPqDhEYy8jCfKEhWWZe/LDB6FwY7YE9QhMg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.18.3/extensions/export/bootstrap-table-export.min.js" integrity="sha512-cAMZL39BuY4jWHUkLWRS+TlHzd/riowdz6RNNVI6CdKRQw1p1rDn8n34lu6pricfL0i8YXeWQIDF5Xa/HBVLRg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.11/jstree.min.js" integrity="sha512-bU6dl4fd2XN3Do3aWypPP2DcKywDyR3YlyszV+rOw9OpglrGyBs6TyTsbglf9umgE+sy+dKm1UHhi07Lv+Vtfg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/codemirror.min.js" integrity="sha512-ZTpbCvmiv7Zt4rK0ltotRJVRaSBKFQHQTrwfs6DoYlBYzO1MA6Oz2WguC+LkV8pGiHraYLEpo7Paa+hoVbCfKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/addon/dialog/dialog.min.js" integrity="sha512-we+ZB6C1/Gi+WtMSWNefd59oPqrfzsm8StIbEtIwaSP1CfPdV/ScqEknSw3nQS4tocb9885wdu/TgPfCDePx7Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/addon/display/autorefresh.min.js" integrity="sha512-vAsKB7xXQAWMn5kcwda0HkFVKUxSYwrmrGprVhmbGFNAG1Ij+2epT3zzdwjHTJyDsKXsiEdrUdhIxh7loHyX+A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/addon/edit/matchbrackets.min.js" integrity="sha512-03Ei8A+mDhwF6O/CmXM47U4A9L7TobAxMbPV2Wn5cEbY76lngHQRyvvmnqhJ8IthfoxrRqmtoBxQCxOC7AOeKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/addon/edit/matchtags.min.js" integrity="sha512-RhFcU90dzfpVCAfiAAFCqH/UESr9/ZzrwX9gW1ZjRh9kPu2CTqvWuk85U6ECWis/M9/yZemU+sheJspFobQOag==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/addon/search/jump-to-line.min.js" integrity="sha512-82DIItx2hxdDqa893OQJ86MzyRj2Zrf8SvXPu/XlHSV6WhFMLx5ZeRFmnrHQPi1zVRXlqrlpliidEXFTj+Zuag==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/addon/search/search.min.js" integrity="sha512-yKYvYs+KegwaGyc9AXAl3VAWEaNzHEV0tL5HuH6Y9Tasq5Q0fqivzctlQA2UuyEOTa5J+hMZAuMifUJUdA8NGw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/addon/search/searchcursor.min.js" integrity="sha512-ebe4PgbfWfZ4YEJJC2gPiIqZ/jdf/eDBRmk4mc31LkEDu60STy0Mtr3D5WbVN24yDYNFwIGQecxp9iSotrn4XQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/addon/selection/active-line.min.js" integrity="sha512-UNVAZmixdjeBtJVQcH5eSKXuVdzbSV6rzfTfNVyYWUIIDCdI9/G8/Z/nWplnSHXXxz9U8TA1BiJ1trK7abL/dg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/mode/css/css.min.js" integrity="sha512-YeNG6eTv+q+p/vvx+E5u05IBRurTlv0jfQuvitZMD+oNe9TfrGw+z4MHHxhPlE3X3csemC5YXlzDLMSZrgb34A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/mode/htmlmixed/htmlmixed.min.js" integrity="sha512-IC+qg9ITjo2CLFOTQcO6fBbvisTeJmiT5D5FnXsCptqY8t7/UxWhOorn2X+GHkoD1FNkyfnMJujt5PcB7qutyA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/mode/javascript/javascript.min.js" integrity="sha512-cMW1RqDC6+KwVloyQoUjqgmM5B0QGZcpZEAHJsab2WrCBmuyqoojv6cQ8O7KtAYtPym2vCooftLPeGzf0klXyA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/mode/php/php.min.js" integrity="sha512-VYPUSn3XJTii+yEASLCfsbt/mM4I1dHCDdCUKlzXE2uXccT9c8MvqtUvvV3+HnJgVtkKGH6qS63FscTYbXmcmw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.1/mode/xml/xml.min.js" integrity="sha512-XPih7uxiYsO+igRn/NA2A56REKF3igCp5t0W1yYhddwHsk70rN1bbbMzYkxrvjQ6uk+W3m+qExHIJlFzE6m5eg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.2/dropzone.min.js" integrity="sha512-llCHNP2CQS+o3EUK2QFehPlOngm8Oa7vkvdUpEFN71dVOf3yAj9yMoPdS5aYRTy8AEdVtqUBIsVThzUSggT0LQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.13.0/Sortable.min.js" integrity="sha512-5x7t0fTAVo9dpfbp3WtE2N6bfipUwk7siViWncdDoSz2KwOqVC1N9fDxEOzk0vTThOua/mglfF8NO7uVDLRC8Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.9.11/tinymce.min.js" integrity="sha512-3tlegnpoIDTv9JHc9yJO8wnkrIkq7WO7QJLi5YfaeTmZHvfrb1twMwqT4C0K8BLBbaiR6MOo77pLXO1/PztcLg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script language="JavaScript">
  (function () {
    'use strict';
    window.addEventListener('load', function () {
      var forms = document.getElementsByClassName('needs-validation');
      var validation = Array.prototype.filter.call(forms, function (form) {
        form.addEventListener('submit', function (event) {
          if (form.checkValidity() === false) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    }, false);
  })();

  var submitNonAjax = function formSubmitNonAjax(form_id) {
    $('#savedAlert').show('fast').delay(5000).hide('fast');
    //$('#' + form_id + ' input[name=ajax]').remove();
    //setTimeout(function () {
    //  $('#' + form_id).removeAttr('onsubmit').submit();
    //}, 4000);
  };

  $(function () {
    $('[data-toggle="tooltip"]').tooltip();
    $('.toast').toast('show');
  });

  $('.form-wait').submit(function (e) {
    if (this.checkValidity() === false) {
      e.preventDefault();
      e.stopPropagation();
      return;
    }
    e.preventDefault();
    this.submit();
    $('#pleaseWaitDialog').modal();
  });

  $(".check-all-switch").on('click', function () {
    $('.' + $(this).data('target')).prop('checked', $(this).prop('checked'));
  });

  $('#form_task_part').submit();

  $('.btn-action').on('click touch', function () {
    $('#confirm-action .confirm-message').html($(this).data('message'));
    $('#confirm-action .btn-ok').attr('data-source', $(this).attr('data-source'));
  });

  $('.btn-ok').on('click touch', function () {
    $('#confirm-action').modal('hide');
    var datasource = $(this).attr('data-source');
    $('#' + datasource).submit();
  });

  $('.password-eye').on('click touch', function () {
    $(this).toggleClass('fa-eye').toggleClass('fa-eye-slash');
    var type = $(this).closest('.input-group').children('input').attr("type");
    if (type == "text") $(this).closest('.input-group').children('input').attr("type", "password"); else $(this).closest('.input-group').children('input').attr("type", "text");
  });

  $('.clipboard-copy').on('click touch', function () {
    var $temp = $("<input>");
    $("body").append($temp);
    $temp.val($(this).attr('data-clipboard-text')).select();
    document.execCommand("copy");
    $temp.remove();
    $('#savedAlert').show('fast').delay(4000).hide('fast');
  });

  $('#acms_settings_password, #acms_settings_safe_password').on('input change', function () {
    if (
      $('#acms_settings_password').val().length &&
      $('#acms_settings_password').val() == $('#acms_settings_safe_password').val()
    ) {
      $('#div_acms_settings_passwords_match').removeClass('d-none');
    } else {
      $('#div_acms_settings_passwords_match').addClass('d-none');
    }
  });

  // LOADER CUSTOM RULES
  $('.loader-settings-rules-wrapper').on('click touch', '.remove-loader-custom-rule', function () {
    $(this).closest('.loader-custom-rule-block').fadeOut(500, function () {
      $(this).remove();
    });
  });

  $('#create-loader-custom-rule').on('click touch', function () {
    newRule = $('.loader-custom-rule-block.d-none').clone();
    newRule.removeClass('d-none');
    newRule.appendTo('.loader-settings-rules-wrapper');
  });

  $('.loader-settings-rules-wrapper').on('click touch', '.put-custom-file', function () {
    $(this).closest('.input-group').children('input').val($(this).data('filename'));
  });

  $('.loader-settings-rules-wrapper').on('click touch', '.put-custom-rule', function () {
    $(this).closest('.loader-custom-rule-block').find('.input-custom-keyphrase').val($(this).data('keyphrase'));
    $(this).closest('.loader-custom-rule-block').find('.input-custom-urlmatch').val($(this).data('urlmatch'));
    $(this).closest('.loader-custom-rule-block').find('.select-custom-regex').val($(this).data('regex')).change();
    $(this).closest('.loader-custom-rule-block').find('.input-custom-limit').val($(this).data('limit'));
    $(this).closest('.loader-custom-rule-block').find('.select-custom-position').val($(this).data('position')).change();
  });

  // filter rules
  $('.search-code-add-filter').on('click touch', function () {
    newRule = $('.search-filter-block.d-none').clone();
    newRule.removeClass('d-none');
    newRule.appendTo('.search-code-filter-wrapper');
  });

  $('.search-url-all').on('click touch', function () {
    $('.search-url-search').val('^');
    $('#perlRegexUrl').prop('checked', true);
  });

  $('.search-url-add-filter').on('click touch', function () {
    newRule = $('.search-filter-block.d-none').clone();
    newRule.removeClass('d-none');
    newRule.appendTo('.search-url-filter-wrapper');
  });

  $('.search-filter-wrapper').on('click touch', '.remove-search-filter', function () {
    $(this).closest('.search-filter-block').fadeOut(500, function () {
      $(this).remove();
    });
  });

  $('.search-filter-wrapper').on('change', '.search-filter-param', function () {
    searchFilterTag = $(this).find('option:selected').data('tag');
    searchFilterType = $(this).find('option:selected').data('type');
    searchFilterRegex = $(this).find('option:selected').data('regex');
    searchFilterCaseSensitive = $(this).find('option:selected').data('case-sensitive');
    searchFilterOperators = $(this).find('option:selected').data('operators').split(',');
    searchFilterPlaceholder = $(this).find('option:selected').data('placeholder');
    searchFilterTextCurrent = $(this).closest('.search-filter-block').find('.search-filter-text');
    searchFilterSelectOperator = $(this).closest('.search-filter-block').find('.search-filter-operator');
    searchFilterValue = searchFilterTextCurrent.val();
    searchFilterText = $(document.createElement(searchFilterTag)).attr('type', searchFilterType);
    searchFilterText.attr({
      name: "filter[text][]",
      class: "form-control search-filter-text text-monospace",
      placeholder: searchFilterPlaceholder
    });
    searchFilterText.val(searchFilterValue);
    searchFilterTextCurrent.replaceWith(searchFilterText);
    if (searchFilterRegex) {
      $(this).closest('.search-filter-block').find('.search-filter-regex-div').removeClass('d-none');
    } else {
      $(this).closest('.search-filter-block').find('.search-filter-regex-div').addClass('d-none');
    }
    if (searchFilterCaseSensitive) {
      $(this).closest('.search-filter-block').find('.search-filter-case-sensitive-div').removeClass('d-none');
    } else {
      $(this).closest('.search-filter-block').find('.search-filter-case-sensitive-div').addClass('d-none');
    }
    searchFilterSelectOperator.find('option').each(function () {
      if (searchFilterOperators.includes($(this).val())) {
        $(this).removeAttr('disabled hidden');
      } else {
        $(this).removeAttr('selected').attr({disabled: true, hidden: true});
      }
    });
    searchFilterSelectOperator.find('option:not([disabled]):first').prop('selected', true);
  });

  $('.search-filter-wrapper').on('change', '.search-filter-regex-checkbox', function () {
    if (this.checked) {
      $(this).prev().val(1);
    } else {
      $(this).prev().val(0);
    }
  });

  $('.search-filter-wrapper').on('change', '.search-filter-case-sensitive-checkbox', function () {
    if (this.checked) {
      $(this).prev().val(1);
    } else {
      $(this).prev().val(0);
    }
  });

  $('.import-external-urls-wrapper').on('click touch', '.put-custom-rule', function () {
    $(this).closest('.import-external-urls-wrapper').find('.input-user-agent').val($(this).data('useragent'));
  });

  $('.constructor-param').on('click touch', function () {
    constructorInput = $(this).closest('.constructor-wrapper').find('.input-constructor');
    if (constructorInput.val().slice(constructorInput.val().length - 1) == '/') {
      constructorInput.val(constructorInput.val().slice(0, -1));
    }
    if ($(this).data('slash')) {
      constructorInput.val(constructorInput.val() + '/' + $(this).data('value') + '/');
    } else {
      constructorInput.val(constructorInput.val() + $(this).data('value'));
    }
  });

  $('.play-youtube').on('click touch', function () {
    $('.videos-welcome-list').addClass('justify-content-center');
    $('.play-youtube').removeClass('text-primary').addClass('text-dark');
    $(this).removeClass('text-dark').addClass('text-primary');
    $('.player-youtube').show(1000);
  });

  $('.input-resize-auto').keydown(resizeInput).keyup(resizeInput).each(resizeInput);

  $('.input-clear').on('click touch', function () {
    $(this).closest('.input-group').find('input').val('');
  });

  $('#createNewUrl').on('shown.bs.modal', function (e) {
    var trigger = $(e.relatedTarget);
    $('#newUrlHostname').val(trigger.data('hostname'));
    $('#newUrlPath').val(trigger.data('path'));
    $('#newUrlMime').val(trigger.data('mime'));
    $('#newUrlCharset').val(trigger.data('charset'));
    console.log(trigger.data('window'));
    if (trigger.data('window') == '_blank') {
      $('#createNewUrlForm').attr('target', '_blank');
    }
  });

  $('#templateModal').on('shown.bs.modal', function (e) {
    $('#templateName').focus();
  });

  $('#breakpointModal').on('shown.bs.modal', function (e) {
    $('#breakpointName').focus();
  });

  $('#clickSearchNew').on('click touch', function () {
    $('#formSearchNew').submit();
  });

  $('#clickToolsView').on('click touch', function () {
    $('#formToolsView').submit();
  });

  $('#clickHistory').on('click touch', function () {
    $('#formHistoryNew').submit();
  });

  $('#clickSettings').on('click touch', function () {
    $('#formSettingsView').submit();
  });

  $('.changePage').on('click touch', function () {
    $('#formUrlsPage .pageNumber').val($(this).data('page'));
    $('#formUrlsPage .domainName').val($(this).data('domain'));
    $('#formUrlsPage').submit();
  });

  $(".check-all").click(function () {
    $("." + $(this).data("group")).prop('checked', $(this).prop('checked'));
  });

  $(".stats-collapse").on('shown.bs.collapse', function () {
    window["drawStatsMimeCount_" + $(this).data('id')]();
    window["drawStatsMimeSize_" + $(this).data('id')]();
  });

  $('.input-upload-file').on('change', function () {
    var importFileName = $(this)[0].files[0].name;
    $(this).next('.custom-file-label').text(importFileName);
  });

  $('#input_create_url_file').on('change', function () {
    $('#newUrlPath').val('/' + $(this)[0].files[0].name);
    $('#newUrlMime').val($(this)[0].files[0].type);
  });

  $(".put-new-url-mime").on('click touch', function () {
    $('#newUrlMime').val($(this).data('mime'));
    $('#newUrlCharset').val($(this).data('charset'));
  });

  $('#historyRecoverSelected').on('click touch', function () {
    rows = [];
    var $table = $('#table_history');
    $table.bootstrapTable('getSelections').forEach(function (row) {
      rows.push(row.id);
    });
    $.post({
      url: url,
      data: {
        action: "history.recover",
        ajax: 1,
        backups: rows.join(),
      },
      success: function (data) {
        rows.forEach(function (row) {
          $table.bootstrapTable('removeByUniqueId', row);
        });
      },
      error: function (data) {
        submitNonAjax('historyRecoverSelected');
      }
    });
  });

  $('#historyPurgeSelected').on('click touch', function () {
    rows = [];
    var $table = $('#table_history');
    $table.bootstrapTable('getSelections').forEach(function (row) {
      rows.push(row.id);
    });
    $.post({
      url: url,
      data: {
        action: "history.purge",
        ajax: 1,
        backups: rows.join(),
      },
      success: function (data) {
        rows.forEach(function (row) {
          $table.bootstrapTable('removeByUniqueId', row);
        });
      },
      error: function (data) {
        submitNonAjax('historyPurgeSelected');
      }
    });
  });

  $('#checkUpdate').on('click touch', function () {
      $('#messageUpdate').html(json.message);
    });

  $('#code-tab').on('shown.bs.tab', function () {
    editor.refresh();
  });

  $('#div_create_custom_file').on('shown.bs.collapse', function () {
    editor.refresh();
  });

  $('#showUnmodified').change(function () {
    if (this.checked) $('.revisions span').css('display', 'block');
    else $('.revisions span').css('display', 'none');
  });

  function resizeInput() {
    $(this).attr('size', ($(this).val().length ? $(this).val().length : 1));
  }

  function ajaxRemoveURL(form) {
    $.post({
      url: url,
      data: $('#' + form).serialize(),
      dataType: 'json',
      success: function (data) {
        $('#' + form).closest('.search-result').hide('fast', function () {
          $(this).remove();
        });
      },
      error: function (data) {
        $('#savedAlert').show('fast').delay(5000).hide('fast');
      }
    });
    return false;
  }

  function ajaxSaveFile(form) {
    if (form == 'formHtml') {
      tinymce.triggerSave();
    }
    if (form == 'formCode') {
      editor.save();
    }
    if (form == 'formText') {
      editor.save();
    }
    if (form == 'formCustomFile') {
      return;
    }
    if (form == 'formCreateCustomFile') {
      return;
    }
    if (form == 'formSimpleHtml') {
      return;
    }

    $.post({
      url: url,
      data: $('#' + form).serialize(),
      dataType: 'json',
      //contentType: 'application/json',
      success: function (data) {
        if (form == 'formHtml') {
          editor.setValue($('#textarea_html').val());
          $('#savedAlert').show('fast').delay(2000).hide('fast');
        }
        if (form == 'formCode') {
          tinymce.editors[0].setContent($('#textarea_text').val());
          tinymce.editors[0].theme.resizeTo('100%', 500);
          tinymce.editors[0].focus();
          $('#savedAlert').show('fast').delay(2000).hide('fast');
        }
        if (form == 'formText') {
          $('#savedAlert').show('fast').delay(2000).hide('fast');
        }
        if (form == 'formCustomFile') {
          return false;
        }
        if (form == 'formCreateCustomFile') {
          return false;
        }
        if (form == 'formSimpleHtml') {
          return false;
        }
      },
      error: function (data) {
        submitNonAjax(form);
      }
    });
    return false;
  }


  function post(path, parameters) {
    var form = $('<form></form>');

    form.attr("method", "post");
    form.attr("action", path);

    $.each(parameters, function (key, value) {
      var field = $('<input></input>');

      field.attr("type", "hidden");
      field.attr("name", key);
      field.attr("value", value);

      form.append(field);
    });

    $(document.body).append(form);
    form.submit();
  }


  // JSTree
  $('[id^=jstree_]').each(function () {
    $(this).jstree({
      "plugins": [
        "wholerow",
        "search",
        "sort",
        "state",
      ],
      "search": {
        "case_sensitive": false,
        "show_only_matches": true
      },
      "core": {
        "themes": {
          "variant": "small",
        },
        "multiple": false,
      },
      "state": {
        "key": "domainname",
      },
      "sort": function (a, b) {
        a1 = this.get_node(a);
        b1 = this.get_node(b);
        if (a1.data.jstree.order == b1.data.jstree.order) {
          return (a1.text > b1.text) ? 1 : -1;
        } else {
          return (a1.data.jstree.order > b1.data.jstree.order) ? 1 : -1;
        }
      },
    })
  });


  $('.template-link').on('click touch', function () {
    post(url,
      {
        show: "edit.template",
        name: $(this).data('name'),
      });
  });

  $('.template-create-page-link').on('click touch', function () {
    post(url,
      {
        action: "show.create.page",
        name: $(this).data('name'),
      });
  });

  $('#template-param-panel button').on('click touch', function () {
    $('#template-param-type').html($(this).data('type'));
    if ($(this).data('name')) {
      $('#template-param-name').val($(this).data('name'));
      $('#template-param-name').each(resizeInput);
    }
  });

  $('#template-param-insert').on('click touch', function () {
    editor.replaceSelection("{{@" + $('#template-param-type').html() + "('" + $('#template-param-name').val() + "')}}");
  });


  $(".urls-tree-expand").on('click touch', function () {
    if ($("#" + $(this).data("jstree")).find(".jstree-open").length !== 0) {
      $("#" + $(this).data("jstree")).jstree('close_all');
    } else {
      $("#" + $(this).data("jstree")).jstree('open_all');
    }
  });

  urlshidden = localStorage.urlshidden === undefined ? [] : JSON.parse(localStorage.urlshidden);
  for (var i in urlshidden) {
    if ($("#" + urlshidden[i]).hasClass('urls-collapse')) {
      $("#" + urlshidden[i]).collapse("hide");
    }
  }

  $(".urls-collapse").on('hidden.bs.collapse', function () {
    var active = $(this).attr('id');
    var urlshidden = localStorage.urlshidden === undefined ? [] : JSON.parse(localStorage.urlshidden);
    if ($.inArray(active, urlshidden) == -1) urlshidden.push(active);
    localStorage.urlshidden = JSON.stringify(urlshidden);
  });

  $(".urls-collapse").on('shown.bs.collapse', function () {
    var active = $(this).attr('id');
    var urlshidden = localStorage.urlshidden === undefined ? [] : JSON.parse(localStorage.urlshidden);
    var elementIndex = $.inArray(active, urlshidden);
    if (elementIndex !== -1) urlshidden.splice(elementIndex, 1);
    localStorage.urlshidden = JSON.stringify(urlshidden);
  });

  // JSTree search action
  var to = false;
  $('#treeSearch').keyup(function () {
    if (to) {
      clearTimeout(to);
    }
    to = setTimeout(function () {
      var v = $('#treeSearch').val();
      $('.filterValue').val(v);
      $('[id^=jstree_]').each(function () {
        $(this).jstree(true).search(v)
      });
    }, 250);
  });

  // JSTree search if any
  var v = $('#treeSearch').val();
  if (v) {
    $('[id^=jstree_]').each(function () {
      $(this).jstree(true).search(v)
    });
  }

  new Sortable(sortwrapper, {
    handle: '.sort-handle',
    swapThreshold: 0.40,
    animation: 500,
    ghostClass: 'border-dark',
  });

  // Dropzone
  Dropzone.options.urlUpload = {
    uploadMultiple: false,
    maxFiles: 1,
    "filterValue": $('#treeSearch').val(),
    addRemoveLinks: true,
    init: function () {
      this.on('success', function () {
        if (this.getUploadingFiles().length === 0 && this.getQueuedFiles().length === 0) {
          post('', {
            "urlID": Dropzone.options.urlUpload.rowID,
            "show": "edit.url",
            "filterValue": $('#treeSearch').val(),
            "sender": "dropzone",
          });
        }
      });
    }
  };

  // Dropzone custom file
  Dropzone.options.customFileUpload = {
    uploadMultiple: false,
    maxFiles: 1,
    addRemoveLinks: true,
    init: function () {
      this.on('success', function () {
        if (this.getUploadingFiles().length === 0 && this.getQueuedFiles().length === 0) {
          post('', {
            "filterValue": $('#treeSearch').val(),
            "sender": "dropzone",
            "action": "upload.custom.file",
          });
        }
      });
    }
  };

  // CodeMirror
  if (document.getElementById('textarea_text')) {
    var editor = CodeMirror.fromTextArea(document.getElementById('textarea_text'), {
      viewportMargin: Infinity,
      lineNumbers: true,
      lineWrapping: true,
      smartIndent: true,
      matchBrackets: true,
      styleActiveLine: true,
      //matchTags: {bothTags: true},
      extraKeys: {
        "Ctrl-S": function (instance) {
          ajaxSaveFile($('#textarea_text').closest('form').attr('id'));
        },
      },
    });
    editor.setSize("100%", "100%");
  }

  $('.codemirror-editor').each(function () {
    CodeMirror.fromTextArea(this, {
      mode: $(this).data('mime'),
      viewportMargin: Infinity,
      lineNumbers: true,
      lineWrapping: true,
      smartIndent: true,
      matchBrackets: true,
      styleActiveLine: true,
      readOnly: $(this).data('readonly'),
    });
  });

  // TinyMCE
  tinyEditor = tinymce.init({
    selector: 'textarea#textarea_html',
    //language: 'en_US',
    plugins: "advlist autoresize lists charmap print anchor textcolor visualblocks colorpicker  fullpage fullscreen code image link imagetools media searchreplace save",
    toolbar: "fullscreen fullpage | insert | undo redo |  formatselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | code image link imagetools media searchreplace save",
    removed_menuitems: 'newdocument',
    save_onsavecallback: function () {
      ajaxSaveFile('formHtml');
    },
    valid_elements: "*[*]",
    valid_children: "*[*]",
    theme: "modern",
    cleanup_on_startup: false,
    trim_span_elements: false,
    verify_html: false,
    cleanup: false,
    extended_valid_elements: "*[*]",
    custom_elements: "*[*]",
    allow_conditional_comments: true,
    allow_html_in_named_anchor: true,
    allow_unsafe_link_target: true,
    convert_fonts_to_spans: false,
    branding: false,
    height: 900,
    autoresize_on_init: true,
    relative_urls: true,
    allow_script_urls: true,
    convert_urls: false,
    remove_script_host: true,
    anchor_bottom: false,
    anchor_top: false,
    forced_root_block: false,
    keep_styles: true,
    remove_trailing_brs: false,
    entity_encoding: "named",
  });

  tinymce.init({
    selector: 'textarea.tinymce-control',
    menubar: false,
    valid_elements: "*[*]",
    valid_children: "*[*]",
    theme: "modern",
    cleanup_on_startup: false,
    trim_span_elements: false,
    verify_html: false,
    cleanup: false,
    extended_valid_elements: "*[*]",
    custom_elements: "*[*]",
    allow_conditional_comments: true,
    allow_html_in_named_anchor: true,
    allow_unsafe_link_target: true,
    convert_fonts_to_spans: false,
    branding: false,
    autoresize_on_init: true,
    relative_urls: true,
    allow_script_urls: true,
    convert_urls: false,
    remove_script_host: true,
    anchor_bottom: false,
    anchor_top: false,
    forced_root_block: false,
    keep_styles: true,
    remove_trailing_brs: false,
    entity_encoding: "named",
    autoresize_bottom_margin: 30,
    plugins: [
      'advlist autolink lists link image charmap print preview anchor textcolor',
      'autoresize searchreplace visualblocks code fullscreen',
      'insertdatetime media image table contextmenu paste code wordcount'
    ],
    toolbar: 'insert | undo redo |  formatselect | bold italic backcolor  | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | image media | removeformat | code',
  });
</script>
</body>
</html>
